import{f as z,j as e}from"./index-B4WEeiSk.js";import{r as i}from"./vendor-react-BcJS7s_i.js";import G from"./detail-XdcJbxQM.js";import H from"./editConnector-DEvxEgkh.js";import Q from"./setChargeProfile-BKz1HYYf.js";import X from"./start-B5PQoOVg.js";import{I,w as j,k as a,X as f,P as y,Y as k,Z as b,$ as S,z as w,H as P,l as J,N as Z}from"./vendor-antd-AsxM9fV-.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-DGcstGqY.js";import"./LineChart-DEAUDPIr.js";import"./isEqual-Hc_6Fhhx.js";import"./vendor-charts-Cv5x1InZ.js";import"./index-Dj133iwh.js";const{Option:t}=j,E={Tesla:["Model S","Model 3","Model X"],Nissan:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"],BYD:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]},p=[{key:"1",name:"ChargePoint 1",cp_sn:"CP001",brand:"Tesla",brand_model:"Model S",chargepoint_status:"Online",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"1-1",connector_id:"C001",status:"Available"},{key:"1-2",connector_id:"C002",status:"Charging"}]},{key:"2",name:"ChargePoint 2",cp_sn:"CP002",brand:"Nissan",brand_model:"Nissan LEAF",chargepoint_status:"Offline",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"2-1",connector_id:"C003",status:"Unavailable"},{key:"2-2",connector_id:"C004",status:"Reserved"}]},{key:"3",name:"ChargePoint 3",cp_sn:"CP003",brand:"BYD",brand_model:"BYD Tang EV",chargepoint_status:"Unknown",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"3-1",connector_id:"C005",status:"Faulted"},{key:"3-2",connector_id:"C006",status:"Unknown"}]}];function he(){const[l,o]=i.useState({}),[c,C]=i.useState([]),[d,v]=i.useState([]),[N,B]=i.useState("list"),[V,h]=i.useState(!1),[A,u]=i.useState(!1),[M,_]=i.useState(!1),[R,x]=i.useState(!1),[D,K]=i.useState(null),F=z();i.useEffect(()=>{const n=p.filter(s=>c.includes(s.key)).flatMap(s=>s.connectors.map(r=>r.key));v(n)},[c]);const O=()=>{},g=n=>{},Y=n=>{C(n)},T=(n,s)=>{v(n);const r=new Set(s.map(m=>m.chargePointKey));C(Array.from(r))},U=[{title:"Name",dataIndex:"name",key:"name",render:(n,s)=>e.jsx(a,{type:"link",onClick:()=>{K(s),_(!0)},children:n})},{title:"SN",dataIndex:"cp_sn",key:"cp_sn"},{title:"Brand",dataIndex:"brand",key:"brand"},{title:"Brand Model",dataIndex:"brand_model",key:"brand_model"},{title:"ChargePoint Status",dataIndex:"chargepoint_status",key:"chargepoint_status"}],$=n=>{const s=[{title:"ID",dataIndex:"connector_id",key:"connector_id"},{title:"Status",dataIndex:"status",key:"status"},{title:"Operation",key:"operation",render:()=>e.jsxs(e.Fragment,{children:[e.jsx(a,{type:"link",icon:e.jsx(f,{}),onClick:()=>x(!0),children:"Start"}),e.jsx(y,{title:"Are you sure to stop?",onConfirm:()=>g(),children:e.jsx(a,{type:"link",icon:e.jsx(k,{}),children:"Stop"})}),e.jsx(a,{type:"link",icon:e.jsx(b,{}),onClick:()=>h(!0),children:"Set Charge Profile"}),e.jsx(a,{type:"link",icon:e.jsx(S,{}),onClick:()=>u(!0),children:"Edit Connector Availability"})]})}];return e.jsx(P,{columns:s,showHeader:!1,dataSource:n.connectors,pagination:!1,rowSelection:{selectedRowKeys:d,onChange:T}})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex flex-wrap",children:[e.jsxs("div",{className:"mb-2 w-1/5 pr-2",children:[e.jsx("div",{children:"Name"}),e.jsx(I,{placeholder:"Name",onChange:n=>o({...l,name:n.target.value})})]}),e.jsxs("div",{className:"mb-2 w-1/5 pr-2",children:[e.jsx("div",{children:"SN"}),e.jsx(I,{placeholder:"SN",onChange:n=>o({...l,cp_sn:n.target.value})})]}),e.jsxs("div",{className:"mb-2 w-1/5 pr-2",children:[e.jsx("div",{children:"Brand"}),e.jsx(j,{className:"w-full",placeholder:"Brand",onChange:n=>{o({...l,brand:n,brand_model:void 0})},children:Object.keys(E).map(n=>e.jsx(t,{value:n,children:n},n))})]}),e.jsxs("div",{className:"mb-2 w-1/5 pr-2",children:[e.jsx("div",{children:"Brand Model"}),e.jsx(j,{className:"w-full",placeholder:"Brand Model",disabled:!l.brand,onChange:n=>o({...l,brand_model:n}),children:l.brand&&E[l.brand].map(n=>e.jsx(t,{value:n,children:n},n))})]}),e.jsxs("div",{className:"mb-2 w-1/5 pr-2",children:[e.jsx("div",{children:"ChargePoint Status"}),e.jsxs(j,{className:"w-full",placeholder:"ChargePoint Status",onChange:n=>o({...l,chargepoint_status:n}),children:[e.jsx(t,{value:"online",children:"Online"}),e.jsx(t,{value:"offline",children:"Offline"}),e.jsx(t,{value:"unknown",children:"Unknown"})]})]}),e.jsxs("div",{className:"mb-2 w-1/5 pr-2",children:[e.jsx("div",{children:"Connector Status"}),e.jsxs(j,{className:"w-full",placeholder:"Connector Status",onChange:n=>o({...l,connector_status:n}),children:[e.jsx(t,{value:"available",children:"Available"}),e.jsx(t,{value:"unavailable",children:"Unavailable"}),e.jsx(t,{value:"preparing",children:"Preparing"}),e.jsx(t,{value:"starting",children:"Starting"}),e.jsx(t,{value:"stopping",children:"Stopping"}),e.jsx(t,{value:"charging",children:"Charging"}),e.jsx(t,{value:"suspended_ev",children:"Suspended EV"}),e.jsx(t,{value:"suspended_evse",children:"Suspended EVSE"}),e.jsx(t,{value:"finishing",children:"Finishing"}),e.jsx(t,{value:"reserved",children:"Reserved"}),e.jsx(t,{value:"faulted",children:"Faulted"}),e.jsx(t,{value:"unknown",children:"Unknown"})]})]}),e.jsxs("div",{className:"w-1/5",children:[e.jsx("label",{className:"invisible block text-sm font-medium text-gray-700",children:"Search"}),e.jsx(a,{type:"primary",onClick:O,children:"Search"})]})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("div",{children:d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(a,{icon:e.jsx(f,{}),onClick:()=>x(!0),children:"Start"}),e.jsx(y,{title:"Are you sure to stop?",onConfirm:()=>g(),children:e.jsx(a,{icon:e.jsx(k,{}),children:"Stop"})}),e.jsx(a,{icon:e.jsx(b,{}),onClick:()=>h(!0),children:"Set Charge Profile"}),e.jsx(a,{icon:e.jsx(S,{}),onClick:()=>u(!0),children:"Edit Connector Availability"})]})}),e.jsxs(w.Group,{value:N,onChange:n=>B(n.target.value),children:[e.jsx(w.Button,{value:"list",children:"List"}),e.jsx(w.Button,{value:"grid",children:"Grid"})]})]}),N==="list"?e.jsx(P,{columns:U,dataSource:p,expandable:{expandedRowRender:$,defaultExpandedRowKeys:p.map(n=>n.key)},rowSelection:{selectedRowKeys:c,onChange:Y},pagination:{total:p.length,showSizeChanger:!0,showQuickJumper:!0,showTotal:n=>`Total ${n} items`}}):e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:p.map(n=>e.jsxs(J,{className:"mb-4",children:[e.jsx("div",{className:"mb-4 flex items-center",children:e.jsx("input",{type:"checkbox",checked:c.includes(n.key),onChange:s=>{const r=s.target.checked?[...c,n.key]:c.filter(m=>m!==n.key);C(r)}})}),e.jsxs("div",{className:"flex",children:[e.jsx(Z,{src:n.picture,width:64,height:64}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{children:n.name}),e.jsxs("p",{children:["SN: ",n.cp_sn]}),e.jsxs("p",{children:["Brand: ",n.brand]}),e.jsxs("p",{children:["Model: ",n.brand_model]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{children:"Connectors:"}),n.connectors.map(s=>e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx("input",{type:"checkbox",checked:d.includes(s.key),onChange:r=>{const m=r.target.checked?[...d,s.key]:d.filter(L=>L!==s.key);v(m)}}),e.jsxs("span",{children:["ID: ",s.connector_id]}),e.jsxs("span",{children:["Status: ",s.status]}),e.jsxs("div",{children:[e.jsx(a,{type:"link",icon:e.jsx(f,{}),onClick:()=>x(!0),children:"Start"}),e.jsx(y,{title:"Are you sure to stop?",onConfirm:()=>g(),children:e.jsx(a,{type:"link",icon:e.jsx(k,{}),children:"Stop"})}),e.jsx(a,{type:"link",icon:e.jsx(b,{}),onClick:()=>h(!0),children:"Set Charge Profile"}),e.jsx(a,{type:"link",icon:e.jsx(S,{}),onClick:()=>u(!0),children:"Edit Connector Availability"})]})]},s.key))]})]},n.key))}),e.jsx(Q,{visible:V,onCancel:()=>h(!1),onConfirm:n=>{h(!1)}}),e.jsx(H,{visible:A,onCancel:()=>u(!1),onConfirm:n=>{u(!1)}}),e.jsx(G,{visible:M,onCancel:()=>_(!1),chargePoint:D,isAdmin:F}),e.jsx(X,{visible:R,onCancel:()=>x(!1),onConfirm:(n,s)=>{x(!1)}})]})}export{he as default};
