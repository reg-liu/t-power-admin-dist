import{j as a}from"./index-CH_dPZ-J.js";import{r}from"./vendor-react-BcJS7s_i.js";import I from"./addBrand-BvBFS_14.js";import{N as l,J as C,w as i,k as N,I as u}from"./vendor-antd-Cm1Y6B8R.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-C6QnRqht.js";const{Option:c}=i,p=[{value:"Tesla",models:["Model S","Model 3","Model X"]},{value:"Nissan",models:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"]},{value:"BYD",models:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]}];function T({visible:j,onCancel:f,record:n,onSave:b}){const[s]=l.useForm(),[v,m]=r.useState(!1),[h,B]=r.useState(p),[x,g]=r.useState(""),o=r.useRef(null),[t,y]=r.useState({brand:"",model:"",year:""});r.useEffect(()=>{n?s.setFieldsValue(n):s.resetFields()},[n,s]),r.useEffect(()=>{if(o.current){const e=o.current.getContext("2d");e&&(e.clearRect(0,0,100,100),e.font="12px Arial",e.fillText(t.brand,10,20),e.fillText(t.model,10,40),e.fillText(t.year,10,60))}},[t]);const F=e=>{g(e),s.setFieldsValue({brand_model:void 0})},V=()=>{const e=s.getFieldsValue();y({brand:e.brand||"",model:e.brand_model||"",year:e.year||""})},A=()=>{s.validateFields().then(e=>{b(e)})},E=(e,d)=>{B([...h,{value:e,models:d}]),s.setFieldsValue({brand:e,brand_model:d[0]})};return a.jsxs(C,{visible:j,title:n?"Edit Brand Model":"Add Brand Model",onCancel:f,zIndex:1001,onOk:A,children:[a.jsxs(l,{form:s,layout:"vertical",onValuesChange:V,children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(l.Item,{name:"brand",label:"Brand",rules:[{required:!0}],children:a.jsx(i,{onChange:e=>{F(e)},dropdownRender:e=>a.jsxs("div",{children:[e,a.jsx("div",{className:"p-2",children:a.jsx(N,{type:"link",onClick:()=>m(!0),children:"Add Brand"})})]}),children:h.map(e=>a.jsx(c,{value:e.value,children:e.value},e.value))})}),a.jsx(l.Item,{name:"brand_model",label:"Brand Model",rules:[{required:!0}],children:a.jsx(i,{disabled:!x,children:p.find(e=>e.value===x)?.models.map(e=>a.jsx(c,{value:e,children:e},e))})}),a.jsx(l.Item,{name:"year",label:"Year",rules:[{required:!0}],children:a.jsx(i,{children:Array.from({length:10},(e,d)=>new Date().getFullYear()-d).map(e=>a.jsx(c,{value:e,children:e},e))})}),a.jsx(l.Item,{name:"class",label:"Class",rules:[{required:!0}],children:a.jsx(u,{})}),a.jsx(l.Item,{name:"plug_type",label:"Plug Type",rules:[{required:!0}],children:a.jsx(u,{})}),a.jsx(l.Item,{name:"battery_capacity",label:"Battery Capacity (Ah)",rules:[{required:!0}],children:a.jsx(u,{type:"number"})})]}),a.jsx(l.Item,{label:"Picture",children:a.jsx("canvas",{ref:o,width:100,height:100})})]}),a.jsx(I,{visible:v,onCancel:()=>m(!1),onSave:E})]})}export{T as default};
