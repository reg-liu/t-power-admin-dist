import{j as e,S as j}from"./index-DojVPh2z.js";import{r as l}from"./vendor-react-BcJS7s_i.js";import{z as I,i as o,o as z,w as h,j as D,H as x,O as w}from"./vendor-antd-IarLURi0.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-Bc-7OOPz.js";function L({visible:c,onCancel:f,connector:A,onConfirm:C}){const[p,v]=l.useState(!1),[i,a]=l.useState([{limit:"",startAfter:"",time:0}]),[m,S]=l.useState("current");l.useEffect(()=>{c||a([{limit:"",startAfter:"",time:0}])},[c]);const g=()=>{a([...i,{limit:"",startAfter:"",time:Date.now()}])},y=t=>{const r=i.filter((s,n)=>n!==t);a([...r])},N=(t,r)=>{const s=[...i],n=s.map((d,u)=>u===t?{...s[t]||{limit:"",startAfter:"",time:Date.now()},limit:r}:d);a(n)},k=(t,r)=>{const s=[...i],n=s.map((d,u)=>u===t?{...s[t]||{limit:"",startAfter:"",time:Date.now()},startAfter:r}:d);a(n)},P=t=>{v(t)},b=t=>{S(t),a([{limit:"",startAfter:"",time:Date.now()}])};return e.jsx(I,{title:"Advanced Start",visible:c,onCancel:f,zIndex:1001,footer:[e.jsxs("div",{className:"footer-normal-btns",children:[e.jsx(o,{onClick:f,children:"Cancel"},"cancel"),e.jsx(o,{type:"primary",onClick:C,children:"Start"},"confirm")]})],width:500,children:e.jsxs("div",{className:"modal-form one-column",children:[e.jsxs("div",{className:"between-wrapper",children:[e.jsx("div",{className:"title",children:A?.name}),e.jsxs("div",{className:"switch",children:["With Charge Profile",e.jsx(z,{checked:p,onChange:P})]})]}),e.jsxs("div",{className:p?"mt-4":"pointer-events-none mt-4 opacity-50",children:[e.jsxs("div",{className:"between-wrapper",children:[e.jsxs(h.Group,{optionType:"button",value:m,onChange:t=>b(t.target.value),className:"my-4",children:[e.jsx(h.Button,{value:"current",children:"Current"}),e.jsx(h.Button,{value:"power",children:"Power"})]}),e.jsx(o,{type:"link",icon:e.jsx(j,{icon:"Add",size:"28"}),onClick:()=>g()})]}),e.jsx(D,{children:i.map((t,r)=>e.jsxs("div",{className:"advance-start-row",children:[e.jsx("div",{className:"close-row",children:e.jsx(o,{type:"link",onClick:()=>y(r),icon:e.jsx(j,{icon:"Close",size:"20",color:"#C3C3C3"})})}),e.jsxs("div",{className:"label-value-split ",children:[e.jsx(x.Item,{name:"limit",label:"Limit",rules:[{required:!0,message:m==="current"?"Current limit":"Power limit"}],children:e.jsx(w,{min:1,max:1e5,defaultValue:t.limit,placeholder:m==="current"?"Current limit":"Power limit",onChange:s=>N(r,s)})}),e.jsx(x.Item,{name:"startAfter",label:"Start After(Minutes)",rules:[{required:!0,message:"Start After"}],children:e.jsx(w,{min:1,max:1e5,placeholder:"Start After",defaultValue:t.startAfter,onChange:s=>k(r,s)})})]},r)]},`setting-${t.time}`))})]})]})})}export{L as default};
