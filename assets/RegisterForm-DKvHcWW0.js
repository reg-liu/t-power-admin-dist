import{a as F,i as _,l as k,j as e,S as f,m as v}from"./index-ASplAzKr.js";import{r as n}from"./vendor-react-DcqtUZ_G.js";import{ReturnButton as L}from"./ReturnButton-VRFLE_Yr.js";import{H as s,x as c,K as t,i as R,y as N,s as q}from"./vendor-antd-BiNc4BQP.js";import"./vendor-ui-BASYQBt4.js";import"./vendor-utils-DcB4TerO.js";function G(){const[m]=s.useForm(),{t:r}=F(),[w,d]=n.useState(!1),[l,y]=n.useState("email"),[u,h]=n.useState(!1),[p,x]=n.useState(0),{loginState:S,backToLogin:j}=_();if(S!==k.REGISTER)return null;const b=async()=>{const a=m.getFieldsValue(),i={};l==="phone"?i.phone=a.phone:i.email=a.email;try{const o=await v.sendCode(i);if(o?.code===200){h(!0),x(60);const E=setInterval(()=>{x(C=>C-1),p===0&&(clearInterval(E),h(!1))},1e3)}else q.error(o.message)}catch{}},I=async a=>{d(!0),await v.register({first_name:a.first_name,last_name:a.last_name,email:a.email,phone:a.phone,password:a.password,code:"123456",country_code:"Australia",platform:"WEB",version:"3.0.0"}),d(!1),j()},P=e.jsx("div",{className:"country-code-wrapper",children:e.jsx("span",{className:"text",children:"+61"})}),g=e.jsx("div",{className:"send-wrapper",onClick:b,children:e.jsx("span",{className:"text",children:u?`${p}S`:"Send"})});return e.jsxs("div",{className:"login-section",children:[e.jsx(L,{onClick:j}),e.jsx("div",{className:"mb-4 text-2xl font-bold xl:text-3xl",children:r("sys.login.signUpFormTitle")}),e.jsxs(c.Group,{className:"login-switch",value:l,onChange:a=>y(a.target.value),children:[e.jsx(c.Button,{value:"email",className:"switch-item",children:e.jsxs("div",{className:"item-inner",children:[e.jsx(f,{icon:l==="email"?"email-active":"email",size:"14"}),"Email"]})}),e.jsx(c.Button,{value:"phone",className:"switch-item",children:e.jsxs("div",{className:"item-inner",children:[e.jsx(f,{icon:l==="phone"?"phone-active":"phone",size:"14"}),"Phone"]})})]}),e.jsxs(s,{name:"normal_login",size:"large",layout:"vertical",form:m,className:"login-form",initialValues:{remember:!0,update:!0},onFinish:I,children:[e.jsx("div",{className:"mb-4 flex flex-col"}),e.jsx(s.Item,{name:"first_name",label:"First Name",rules:[{required:!0,message:"Please input First Name"}],children:e.jsx(t,{placeholder:"Enter"})}),e.jsx(s.Item,{name:"last_name",label:"Last Name",rules:[{required:!0,message:"Please input Last Name"}],children:e.jsx(t,{placeholder:"Enter"})}),l==="phone"?e.jsx(s.Item,{name:"phone",label:r("sys.login.phone"),rules:[{required:!0,message:r("sys.login.phonePlaceholder")}],children:e.jsx(t,{placeholder:"Enter",addonBefore:P,addonAfter:g,allowClear:!0})}):e.jsx(s.Item,{name:"email",label:r("sys.login.email"),rules:[{required:!0,message:r("sys.login.emailPlaceholder")}],children:e.jsx(t,{addonAfter:g,placeholder:"Enter"})}),u&&e.jsxs(s.Item,{name:"code",label:"Code",rules:[{required:!0,message:"Please input Code"}],children:[e.jsx(t.OTP,{length:4}),e.jsx("div",{className:"password-rule",children:"Please enter the 4-digit code sent to your email/phone at [email/phone]"})]}),e.jsxs(s.Item,{name:"password",label:r("sys.login.password"),rules:[{required:!0,message:r("sys.login.passwordPlaceholder")}],children:[e.jsx(t.Password,{type:"password",placeholder:"Enter"}),e.jsx("div",{className:"password-rule",children:"Your password must include at least 8 characters, with at least one uppercase letter, one lowercase letter, one number and one special character."})]}),e.jsx(s.Item,{children:e.jsx(R,{type:"primary",htmlType:"submit",className:"w-full",loading:w,children:"Continue"})}),e.jsxs("div",{className:"rules",children:[e.jsx(s.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(N,{children:e.jsxs("div",{className:"password-rule",children:["I accept the"," ",e.jsx("a",{href:"./",className:"text-sm !underline",children:r("sys.login.termsOfService")})," ","and"," ",e.jsx("a",{href:"./",className:"text-sm !underline",children:r("sys.login.privacyPolicy")})]})})}),e.jsx(s.Item,{name:"update",valuePropName:"checked",noStyle:!0,children:e.jsx(N,{children:e.jsx("div",{className:"password-rule",children:"Receive product and marketing updates"})})})]})]})]})}export{G as default};
