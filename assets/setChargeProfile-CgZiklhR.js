import{j as e,S as h}from"./index-DojVPh2z.js";import{r as u}from"./vendor-react-BcJS7s_i.js";import{z as b,i as l,w as f,j as k,H as j,O as x}from"./vendor-antd-IarLURi0.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-Bc-7OOPz.js";function B({visible:o,onCancel:p,connector:w,onConfirm:A}){const[i,a]=u.useState([{limit:"",startAfter:"",time:0}]),[c,C]=u.useState("current");u.useEffect(()=>{o||a([{limit:"",startAfter:"",time:0}])},[o]);const v=()=>{a([...i,{limit:"",startAfter:"",time:Date.now()}])},g=t=>{const r=i.filter((s,n)=>n!==t);a([...r])},y=(t,r)=>{const s=[...i],n=s.map((m,d)=>d===t?{...s[t]||{limit:"",startAfter:"",time:Date.now()},limit:r}:m);a(n)},S=(t,r)=>{const s=[...i],n=s.map((m,d)=>d===t?{...s[t]||{limit:"",startAfter:"",time:Date.now()},startAfter:r}:m);a(n)},N=t=>{C(t),a([{limit:"",startAfter:"",time:Date.now()}])};return e.jsx(b,{title:"Set Charge Profile",visible:o,onCancel:p,zIndex:1001,footer:[e.jsxs("div",{className:"footer-normal-btns",children:[e.jsx(l,{onClick:p,children:"Cancel"},"cancel"),e.jsx(l,{type:"primary",onClick:A,children:"Confirm"},"confirm")]})],width:500,children:e.jsxs("div",{className:"modal-form one-column",children:[e.jsx("div",{className:"between-wrapper",children:e.jsx("div",{className:"title",children:w?.name})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"between-wrapper",children:[e.jsxs(f.Group,{optionType:"button",value:c,onChange:t=>N(t.target.value),className:"my-4",children:[e.jsx(f.Button,{value:"current",children:"Current"}),e.jsx(f.Button,{value:"power",children:"Power"})]}),e.jsx(l,{type:"link",icon:e.jsx(h,{icon:"Add",size:"28"}),onClick:()=>v()})]}),e.jsx(k,{children:i.map((t,r)=>e.jsxs("div",{className:"advance-start-row",children:[e.jsx("div",{className:"close-row",children:e.jsx(l,{type:"link",onClick:()=>g(r),icon:e.jsx(h,{icon:"Close",size:"20",color:"#C3C3C3"})})}),e.jsxs("div",{className:"label-value-split ",children:[e.jsx(j.Item,{name:"limit",label:"Limit",rules:[{required:!0,message:c==="current"?"Current limit":"Power limit"}],children:e.jsx(x,{min:1,max:1e5,defaultValue:t.limit,placeholder:c==="current"?"Current limit":"Power limit",onChange:s=>y(r,s)})}),e.jsx(j.Item,{name:"startAfter",label:"Start After(Minutes)",rules:[{required:!0,message:"Start After"}],children:e.jsx(x,{min:1,max:1e5,placeholder:"Start After",defaultValue:t.startAfter,onChange:s=>S(r,s)})})]},r)]},`setting-${t.time}`))})]})]})})}export{B as default};
