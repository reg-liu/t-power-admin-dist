import{j as e,S as i,f as K}from"./index-DojVPh2z.js";import{r}from"./vendor-react-BcJS7s_i.js";import{c as W}from"./chargepoint-wPlJlVYc.js";import Z from"./detail-Du_b20os.js";import ee from"./editConnector-Bzm51mHl.js";import se from"./setChargeProfile-CgZiklhR.js";import ae from"./start-Jnh0TnNs.js";import{F as f,i as t,K as ne,v as j,w as _,P as p,x as P,j as te,I as ie,D as M,y as le,E as re}from"./vendor-antd-IarLURi0.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-Bc-7OOPz.js";import"./LineChart-BhC2MHWo.js";import"./isEqual-Hc_6Fhhx.js";import"./vendor-charts-Cv5x1InZ.js";import"./index-Dj133iwh.js";const{Option:n}=j,z={Tesla:["Model S","Model 3","Model X"],Nissan:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"],BYD:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]},m=[{key:"1",name:"Charge Point 1",cp_sn:"CP001",brand:"Tesla",brand_model:"Model S",chargepoint_status:"Online",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"1-1",chargePointKey:"1",name:"Connector A",connector_id:"C001",status:"Available"},{key:"1-2",chargePointKey:"1",name:"Connector B",connector_id:"C002",status:"Charging"}]},{key:"2",name:"Charge Point 2",cp_sn:"CP002",brand:"Nissan",brand_model:"Nissan LEAF",chargepoint_status:"Offline",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"2-1",chargePointKey:"2",name:"Connector A",connector_id:"C003",status:"Unavailable"},{key:"2-2",chargePointKey:"2",name:"Connector B",connector_id:"C004",status:"Reserved"}]},{key:"3",name:"Charge Point 3",cp_sn:"CP003",brand:"BYD",brand_model:"BYD Tang EV",chargepoint_status:"Unknown",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"3-1",chargePointKey:"3",name:"Connector A",connector_id:"C005",status:"Faulted"},{key:"3-2",chargePointKey:"3",name:"Connector B",connector_id:"C006",status:"Unknown"}]},{key:"4",name:"Charge Point 4",cp_sn:"CP004",brand:"Tesla",brand_model:"Model S",chargepoint_status:"Online",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"4-1",chargePointKey:"1",name:"Connector A",connector_id:"C007",status:"Available"},{key:"4-2",chargePointKey:"1",name:"Connector B",connector_id:"C008",status:"Charging"}]}];function Ne(){const[l,x]=r.useState({}),[C,V]=r.useState("name"),[c,E]=r.useState([]),[d,N]=r.useState([]),[B,D]=r.useState("list"),[A,v]=r.useState(!1),[O,g]=r.useState(!1),[L,k]=r.useState(!1),[R,y]=r.useState(!1),[U,T]=r.useState(null),[b,F]=r.useState(null);r.useEffect(()=>{const s=m.filter(a=>c.includes(a.key)).flatMap(a=>a.connectors.map(o=>o.key));N(s)},[c]);const Y=()=>{},u=s=>{},S=s=>{E(s)},$=s=>{N(s)},G=()=>{c.length===m.length?S([]):S(m.map(s=>s.key))},H=()=>{b?.status==="Charging"?v(!0):re.error("Only the Connector in Charging state supports this operation.")},Q=[f.SELECTION_COLUMN,f.EXPAND_COLUMN,{title:"Charge Point",dataIndex:"name",className:"bold",key:"name",render:(s,a)=>e.jsx(t,{type:"link",onClick:()=>{T(a),k(!0)},children:s})},{title:"Status",dataIndex:"chargepoint_status",key:"chargepoint_status",render:s=>e.jsxs("div",{className:`status-item ${s.toLowerCase()}`,children:[e.jsx("div",{className:"point"}),e.jsx("span",{children:s})]})},{title:"SN",dataIndex:"cp_sn",key:"cp_sn"},{title:"Brand",dataIndex:"brand",key:"brand"},{title:"Brand Model",dataIndex:"brand_model",key:"brand_model"}],I=[{key:"0",label:e.jsx(t,{type:"link",className:" operation-row-item",icon:e.jsx(i,{icon:"AStart",size:"20"}),onClick:()=>y(!0),children:"Advance Start"})},{key:"1",label:e.jsx(t,{type:"link",icon:e.jsx(i,{icon:"Set",size:"20"}),onClick:()=>H(),children:"Set Charge Profile"})},{key:"2",label:e.jsx(t,{type:"link",icon:e.jsx(i,{icon:"Edit",size:"20"}),onClick:()=>g(!0),children:"Edit Connector Status"})}],X=s=>{const a=[{title:"ID",className:"bold",width:"210px",dataIndex:"name",key:"name"},{title:"Status",width:"240px",dataIndex:"status",key:"status",render:o=>e.jsx("div",{className:`status ${o.toLowerCase()}`,children:e.jsx("span",{children:o})})},{title:"Operation",width:"340px",key:"operation",render:(o,h)=>e.jsxs("div",{className:"operations end",children:[e.jsx(p,{title:"Confirm start?",placement:"bottom",okText:"Confirm",cancelText:"Cancel",onConfirm:()=>u(),children:e.jsx(t,{type:"link",icon:e.jsx(i,{icon:"Start",size:"20"}),children:"Start"})}),e.jsx(p,{placement:"bottom",okText:"Confirm",cancelText:"Cancel",title:"Confirm stop?",onConfirm:()=>u(),children:e.jsx(t,{type:"link",icon:e.jsx(i,{icon:"Stop",size:"20"}),children:"Stop"})}),e.jsx(M,{menu:{items:I},trigger:["click"],children:e.jsx("div",{children:e.jsx(t,{onClick:()=>F(h),type:"link",icon:e.jsx(i,{icon:"Ellipsis",size:"20"})})})})]})}];return e.jsx(f,{columns:a,showHeader:!1,dataSource:s.connectors,pagination:!1,bordered:!0,rowSelection:{selectedRowKeys:d,onChange:$}})},J=e.jsxs(j,{value:C,onChange:V,style:{width:156},children:[e.jsx(n,{value:"name",children:"Charge Point"}),e.jsx(n,{value:"sn",children:"SN"})]}),q=s=>{const{expanded:a,onExpand:o,record:h}=s;return e.jsx("span",{onClick:w=>o(h,w),children:e.jsx(i,{icon:a?"Down":"Right",size:"17",color:"#d9d9d9",style:{marginTop:"-2px"}})})};return e.jsxs("div",{className:"main-content",children:[e.jsxs("div",{className:"search-area flex items-center justify-start",children:[e.jsxs("div",{className:"search-item",children:[e.jsx("div",{className:"label",children:"Enter"}),e.jsx(ne,{addonBefore:J,placeholder:C==="name"?"Charge Point":"SN",allowClear:!0,value:l[C],onChange:s=>x({...l,[C]:s.target.value})})]}),e.jsxs("div",{className:"search-item",children:[e.jsx("div",{className:"label",children:"Brand"}),e.jsx(j,{className:"w-full",placeholder:"Brand",allowClear:!0,value:l.brand,style:{width:"150px"},onChange:s=>{x({...l,brand:s,brand_model:void 0})},children:Object.keys(z).map(s=>e.jsx(n,{value:s,children:s},s))})]}),e.jsxs("div",{className:"search-item",children:[e.jsx("div",{className:"label",children:"Brand Model"}),e.jsx(j,{className:"w-full",allowClear:!0,disabled:!l.brand,placeholder:"Brand Model",style:{width:"160px"},value:l.brand_model,onChange:s=>x({...l,brand_model:s}),children:l.brand&&z[l.brand].map(s=>e.jsx(n,{value:s,children:s},s))})]}),e.jsxs("div",{className:"search-item",children:[e.jsx("div",{className:"label",children:"Charge Point Status"}),e.jsxs(j,{className:"w-full",style:{width:"210px"},allowClear:!0,value:l.chargepoint_status,placeholder:"Charge Point Status",onChange:s=>x({...l,chargepoint_status:s}),children:[e.jsx(n,{value:"online",children:"Online"}),e.jsx(n,{value:"offline",children:"Offline"}),e.jsx(n,{value:"unknown",children:"Unknown"})]})]}),e.jsxs("div",{className:"search-item",children:[e.jsx("div",{className:"label",children:"Connector Status"}),e.jsxs(j,{className:"w-full",style:{width:"190px"},allowClear:!0,placeholder:"Connector Status",value:l.connector_status,onChange:s=>x({...l,connector_status:s}),children:[e.jsx(n,{value:"available",children:"Available"}),e.jsx(n,{value:"unavailable",children:"Unavailable"}),e.jsx(n,{value:"preparing",children:"Preparing"}),e.jsx(n,{value:"starting",children:"Starting"}),e.jsx(n,{value:"stopping",children:"Stopping"}),e.jsx(n,{value:"charging",children:"Charging"}),e.jsx(n,{value:"suspended_ev",children:"Suspended EV"}),e.jsx(n,{value:"suspended_evse",children:"Suspended EVSE"}),e.jsx(n,{value:"finishing",children:"Finishing"}),e.jsx(n,{value:"reserved",children:"Reserved"}),e.jsx(n,{value:"faulted",children:"Faulted"}),e.jsx(n,{value:"unknown",children:"Unknown"})]})]}),e.jsx("div",{className:"search-btn",children:e.jsx(t,{icon:e.jsx(i,{icon:"Search",size:"20"}),type:"primary",onClick:Y})}),e.jsx("div",{className:"search-btn clear",children:e.jsx(t,{icon:e.jsx(i,{icon:"Close",size:"24",color:"#999"}),type:"primary",onClick:()=>x({})})})]}),e.jsxs("div",{className:"operation-area flex items-center justify-start",children:[e.jsxs(_.Group,{className:"layout-switch",value:B,onChange:s=>D(s.target.value),children:[e.jsx(_.Button,{value:"list",children:e.jsxs("div",{className:"layout-switch-item",children:[e.jsx(K,{icon:"mynaui:list",size:20}),"List"]})}),e.jsx(_.Button,{value:"grid",children:e.jsxs("div",{className:"layout-switch-item",children:[e.jsx(K,{icon:"proicons:grid",size:20}),"Grid"]})})]}),e.jsx(p,{placement:"bottom",okText:"Confirm",cancelText:"Cancel",title:"Confirm Start?",onConfirm:()=>u(),children:e.jsx(t,{className:"ml-3 mr-3",disabled:d.length===0,icon:e.jsx(i,{icon:"Start",size:"20",color:d.length===0?"#999":"currentColor"}),children:"Bulk Start"})}),e.jsx(p,{placement:"bottom",okText:"Confirm",cancelText:"Cancel",title:"Confirm stop?",onConfirm:()=>u(),children:e.jsx(t,{disabled:d.length===0,className:"mr-3",icon:e.jsx(i,{color:d.length===0?"#999":"currentColor",icon:"Stop",size:"20"}),children:"Bulk Stop"})})]}),B==="list"?e.jsx(f,{columns:Q,dataSource:m,rowHoverable:!1,bordered:!0,pagination:!1,expandable:{expandedRowRender:X,expandIcon:q,defaultExpandedRowKeys:m.map(s=>s.key)},rowSelection:{selectedRowKeys:c,onChange:S}}):e.jsxs("div",{className:"grid-wrapper",children:[e.jsx(P,{className:"check-all",checked:m.length===c.length,onChange:G}),e.jsx("div",{className:"grid",children:m.map(s=>e.jsx("div",{className:"grid-item",children:e.jsxs(te,{children:[e.jsxs("div",{className:"grid-top with-image flex items-center",children:[e.jsx(P,{checked:c.includes(s.key),onChange:a=>{const o=a.target.checked?[...c,s.key]:c.filter(h=>h!==s.key);E(o)}}),e.jsx(ie,{src:W,preview:!1,height:184,className:"entity-image object-cover"})]}),e.jsxs("div",{className:"grid-bottom monitor-bottom",children:[e.jsx("div",{className:"display-item",children:e.jsx(t,{type:"link",className:"detail-link",onClick:()=>{T(s),k(!0)},children:s.name})}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"Status:"})," ",e.jsx("span",{className:"value",children:e.jsxs("div",{className:`status-item ${s.chargepoint_status.toLowerCase()}`,children:[e.jsx("div",{className:"point"}),e.jsx("span",{children:s.chargepoint_status})]})})]}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"SN:"})," ",e.jsx("span",{className:"value",children:s.cp_sn})]}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"Brand:"})," ",e.jsx("span",{className:"value",children:s.brand})]}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"Brand Model:"})," ",e.jsx("span",{className:"value",children:s.brand_model})]}),s.chargepoint_status!=="Offline"&&e.jsx("div",{className:"display-item  !mb-0 flex-col !items-start gap-2 !px-0",children:s.connectors.map(a=>e.jsxs("div",{className:"connector-wrapper w-full",children:[e.jsxs("div",{className:"connectors",children:[e.jsx(P,{checked:d.includes(a.key),onChange:o=>{const h=o.target.checked?[...d,a.key]:d.filter(w=>w!==a.key);N(h)}}),e.jsx("div",{className:"items flex-auto",children:e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:a.name})," ",e.jsx("span",{className:`value status ${a.status.toLowerCase()}`,children:a.status})]})})]}),e.jsx("div",{className:"operation-columns",children:e.jsxs("div",{className:"operation-row",children:[e.jsx(p,{title:"Confirm start?",placement:"bottom",okText:"Confirm",cancelText:"Cancel",onConfirm:()=>u(),children:e.jsx(t,{type:"link",className:" operation-row-item",icon:e.jsx(i,{icon:"Start",size:"20"}),children:"Start"})}),e.jsx("div",{className:"split"}),e.jsx(p,{title:"Confirm stop?",placement:"bottom",okText:"Confirm",cancelText:"Cancel",onConfirm:()=>u(),children:e.jsx(t,{className:"operation-row-item",type:"link",icon:e.jsx(i,{icon:"Stop",size:"20"}),children:"Stop"})}),e.jsx("div",{className:"split"}),e.jsx(M,{menu:{items:I},children:e.jsx("div",{className:"operation-row-item",children:e.jsx(t,{type:"link",icon:e.jsx(i,{icon:"Ellipsis",size:"20"})})})})]})})]},a.key))})]})]},s.key)}))})]}),e.jsx("div",{className:"mr-4 mt-4 flex justify-end",children:e.jsx(le,{total:m.length,showQuickJumper:!0})}),e.jsx(se,{visible:A,connector:b,onCancel:()=>v(!1),onConfirm:()=>{v(!1)}}),e.jsx(ee,{visible:O,onCancel:()=>g(!1),onConfirm:s=>{g(!1)}}),L?e.jsx(Z,{onCancel:()=>k(!1),chargePoint:U,onStart:()=>y(!0),onSetChargeProfile:()=>v(!0),onEditConnector:()=>g(!0)}):null,e.jsx(ae,{visible:R,connector:b,onCancel:()=>y(!1),onConfirm:()=>{y(!1)}})]})}export{Ne as default};
