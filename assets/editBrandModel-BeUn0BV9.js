import{j as a}from"./index-DDpD7CQs.js";import{r}from"./vendor-react-BcJS7s_i.js";import E from"./addBrand-D97Cn-qG.js";import{N as l,J as I,k as o,w as i,I as c,U as S,y as T}from"./vendor-antd-Cm1Y6B8R.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-C6QnRqht.js";const{Option:u}=i,f=[{value:"Tesla",models:["Model S","Model 3","Model X"]},{value:"Nissan",models:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"]},{value:"BYD",models:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]}];function k({visible:v,onCancel:m,record:n,onSave:b}){const[s]=l.useForm(),[y,x]=r.useState(!1),[h,B]=r.useState(f),[j,g]=r.useState(""),p=r.useRef(null),[t,N]=r.useState({brand:"",model:"",year:""});r.useEffect(()=>{n?s.setFieldsValue(n):s.resetFields()},[n,s]),r.useEffect(()=>{if(p.current){const e=p.current.getContext("2d");e&&(e.clearRect(0,0,100,100),e.font="12px Arial",e.fillText(t.brand,10,20),e.fillText(t.model,10,40),e.fillText(t.year,10,60))}},[t]);const A=e=>{g(e),s.setFieldsValue({brand_model:void 0})},C=()=>{const e=s.getFieldsValue();N({brand:e.brand||"",model:e.brand_model||"",year:e.year||""})},F=()=>{s.validateFields().then(e=>{b(e)})},V=(e,d)=>{B([...h,{value:e,models:d}]),s.setFieldsValue({brand:e,brand_model:d[0]})};return a.jsxs(I,{visible:v,title:n?"Edit Brand Model":"Add Brand Model",onCancel:m,zIndex:1001,footer:[a.jsxs("div",{className:"footer-normal-btns",children:[a.jsx(o,{onClick:m,children:"Cancel"},"cancel"),a.jsx(o,{type:"primary",onClick:F,children:"Confirm"},"confirm")]})],children:[a.jsx("div",{className:"modal-form",children:a.jsxs(l,{form:s,layout:"vertical",onValuesChange:C,children:[a.jsxs("div",{className:"two-column",children:[a.jsx(l.Item,{name:"brand",label:"Brand",rules:[{required:!0}],children:a.jsx(i,{onChange:e=>{A(e)},dropdownRender:e=>a.jsxs("div",{children:[e,a.jsx("div",{className:"p-2",children:a.jsx(o,{type:"link",onClick:()=>x(!0),children:"Add Brand"})})]}),children:h.map(e=>a.jsx(u,{value:e.value,children:e.value},e.value))})}),a.jsx(l.Item,{name:"brand_model",label:"Brand Model",rules:[{required:!0}],children:a.jsx(i,{disabled:!j,children:f.find(e=>e.value===j)?.models.map(e=>a.jsx(u,{value:e,children:e},e))})})]}),a.jsxs("div",{className:"two-column",children:[a.jsx(l.Item,{name:"year",label:"Year",rules:[{required:!0}],children:a.jsx(i,{children:Array.from({length:10},(e,d)=>new Date().getFullYear()-d).map(e=>a.jsx(u,{value:e,children:e},e))})}),a.jsx(l.Item,{name:"class",label:"Class",rules:[{required:!0}],children:a.jsx(c,{})})]}),a.jsxs("div",{className:"two-column",children:[a.jsx(l.Item,{name:"plug_type",label:"Plug Type",rules:[{required:!0}],children:a.jsx(c,{})}),a.jsx(l.Item,{name:"battery_capacity",label:"Battery Capacity (Ah)",rules:[{required:!0}],children:a.jsx(c,{type:"number"})})]}),a.jsx(l.Item,{name:"picture",label:"Picture",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:a.jsx(S,{listType:"picture-card",children:a.jsxs("div",{children:[a.jsx(T,{}),a.jsx("div",{style:{marginTop:8},children:"Upload"})]})})})]})}),a.jsx(E,{visible:y,onCancel:()=>x(!1),onSave:V})]})}export{k as default};
