import{a as F,k as _,m as q,j as e,S as y,n as v}from"./index-4YVUTv9m.js";import{r as o}from"./vendor-react-DcqtUZ_G.js";import{ReturnButton as L}from"./ReturnButton-1pZbAIh0.js";import{H as a,x as m,K as l,i as R,y as N,s as u}from"./vendor-antd-BiNc4BQP.js";import"./vendor-ui-BASYQBt4.js";import"./vendor-utils-DcB4TerO.js";function M(){const[h]=a.useForm(),{t}=F(),[w,p]=o.useState(!1),[n,b]=o.useState("email"),[c,x]=o.useState("ready"),[S,j]=o.useState(0),{loginState:I,backToLogin:g}=_();if(I!==q.REGISTER)return null;const P=async()=>{if(c!=="ready")return;const s=h.getFieldsValue(),r={};if(n==="phone"){if(r.phone=s.phone,!s.phone)return}else if(r.email=s.email,!s.email)return;try{x("sended"),j(60);const i=setInterval(()=>{j(d=>d>0?d-1:(clearInterval(i),x("ready"),d))},1e3),f=await v.sendCode(r);f?.code===200&&u.success(f.message)}catch{}},C=async s=>{if(!s.remember){u.error("Please agree to the terms of service and privacy policy");return}p(!0);const r={first_name:s.first_name,last_name:s.last_name,password:s.password,code:s.code,country_code:"Australia",platform:"WEB",version:"2.3.0"};n==="phone"?r.phone=s.phone:r.email=s.email;const i=await v.register(r);p(!1),i?.code===200&&(u.success(i.message),g())},E=e.jsx("div",{className:"country-code-wrapper",children:e.jsx("span",{className:"text",children:"+61"})}),k=e.jsx("div",{className:`send-wrapper ${c!=="ready"?"send-disabled":""}`,onClick:P,children:e.jsx("span",{className:"text",children:c==="sended"?`${S}S`:"Verification Code"})});return e.jsxs("div",{className:"login-section",children:[e.jsx(L,{onClick:g}),e.jsx("div",{className:"mb-4 text-2xl font-bold xl:text-3xl",children:t("sys.login.signUpFormTitle")}),e.jsxs(m.Group,{className:"login-switch",value:n,onChange:s=>b(s.target.value),children:[e.jsx(m.Button,{value:"email",className:"switch-item",children:e.jsxs("div",{className:"item-inner",children:[e.jsx(y,{icon:n==="email"?"email-active":"email",size:"14"}),"Email"]})}),e.jsx(m.Button,{value:"phone",className:"switch-item",children:e.jsxs("div",{className:"item-inner",children:[e.jsx(y,{icon:n==="phone"?"phone-active":"phone",size:"14"}),"Phone"]})})]}),e.jsxs(a,{name:"normal_login",size:"large",layout:"vertical",form:h,className:"login-form",initialValues:{remember:!0,update:!0},onFinish:C,children:[e.jsx("div",{className:"mb-4 flex flex-col"}),e.jsx(a.Item,{name:"first_name",label:"First Name",rules:[{required:!0,message:"Please input First Name"}],children:e.jsx(l,{placeholder:"Enter"})}),e.jsx(a.Item,{name:"last_name",label:"Last Name",rules:[{required:!0,message:"Please input Last Name"}],children:e.jsx(l,{placeholder:"Enter"})}),n==="phone"?e.jsx(a.Item,{name:"phone",label:t("sys.login.phone"),rules:[{required:!0,message:t("sys.login.phonePlaceholder")},{pattern:/^\d{9,}$/,message:"Phone number must be at least 9 digits!"}],children:e.jsx(l,{placeholder:"Enter",addonBefore:E,allowClear:!0})}):e.jsx(a.Item,{name:"email",label:t("sys.login.email"),rules:[{required:!0,message:t("sys.login.emailPlaceholder")},{type:"email",message:"Please enter a valid email address!"}],children:e.jsx(l,{placeholder:"Enter"})}),e.jsx(a.Item,{name:"code",label:"Verification Code",rules:[{required:!0,message:"Please input Code"},{pattern:/^\d{4}$/,message:"Code must be exactly 4 digits!"}],children:e.jsxs("div",{children:[e.jsx(l,{className:"code-input",addonAfter:k}),e.jsx("div",{className:"password-rule",children:"Please enter the 4-digit code sent to your email/phone at [email/phone]"})]})}),e.jsx(a.Item,{name:"password",label:t("sys.login.password"),rules:[{required:!0,message:t("sys.login.passwordPlaceholder")},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"The password needs to meet the above requirements"}],children:e.jsxs("div",{children:[e.jsx(l.Password,{type:"password",placeholder:"Enter"}),e.jsx("div",{className:"password-rule",children:"Your password must include at least 8 characters, with at least one uppercase letter, one lowercase letter, one number and one special character."})]})}),e.jsx(a.Item,{children:e.jsx(R,{type:"primary",htmlType:"submit",className:"w-full",loading:w,children:"Continue"})}),e.jsxs("div",{className:"rules",children:[e.jsx(a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(N,{children:e.jsxs("div",{className:"password-rule",children:["I accept the"," ",e.jsx("a",{href:"./",className:"text-sm !underline",children:t("sys.login.termsOfService")})," ","and"," ",e.jsx("a",{href:"./",className:"text-sm !underline",children:t("sys.login.privacyPolicy")})]})})}),e.jsx(a.Item,{name:"update",valuePropName:"checked",noStyle:!0,children:e.jsx(N,{children:e.jsx("div",{className:"password-rule",children:"Receive product and marketing updates"})})})]})]})]})}export{M as default};
