import{h as Q,j as e,S as i,f}from"./index-CJS0LehZ.js";import{r as n}from"./vendor-react-BcJS7s_i.js";import{c as J}from"./commonService-CKPZ1IzQ.js";import{A as U,c as w}from"./addChargepoint-C8PbTGVF.js";import{c as X}from"./chargepoint-wPlJlVYc.js";import H from"./detail-BNU5qrvg.js";import{K as W,w as m,i as r,x as g,P as v,F as Z,y as S,j as ee,I as ae,z as se}from"./vendor-antd-B62eGpCx.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-CtEfXJzW.js";const{Option:c}=m,le=[{value:"Tesla",label:"Tesla"},{value:"Nissan",label:"Nissan"},{value:"BYD",label:"BYD"}],ne={Tesla:["Model S","Model 3","Model X"],Nissan:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"],BYD:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]};function pe(){const[t,x]=n.useState([]),[d,k]=n.useState([]),[B,D]=n.useState(0),[N,I]=n.useState("list"),[M,b]=n.useState(!1),[A,C]=n.useState(!1),[P,T]=n.useState(null),[u,z]=n.useState("id_tag"),[l,o]=n.useState({}),[V,E]=n.useState([]),F=Q(),Y=()=>{y()},R=[{title:"Charge Point",dataIndex:"id_tag",key:"id_tag",className:"bold",render:(a,s)=>e.jsx(r,{type:"link",onClick:()=>_(s),children:a})},{title:"SN",dataIndex:"sn",key:"sn"},{title:"Brand",dataIndex:"brand",key:"brand"},{title:"Brand Model",dataIndex:"brand_model",key:"brand_model"},{title:"Charge Model",dataIndex:"charge_model",key:"charge_model"},{title:"Operation",width:"140px",key:"operation",render:(a,s)=>e.jsx("div",{className:"operations",children:e.jsx(v,{title:"Confirm delete?",placement:"bottom",okText:"Confirm",cancelText:"Cancel",onConfirm:()=>{p(s.id)},children:e.jsx(r,{type:"link",danger:!0,icon:e.jsx(i,{icon:"Delete",size:"20",color:"#FF4747"}),children:"Delete"})})})}],$={selectedRowKeys:t,onChange:a=>{x(a)}},_=a=>{T(a),b(!0)},K=e.jsxs(m,{value:u,onChange:z,style:{width:156},children:[e.jsx(c,{value:"id_tag",children:"Charge Point"}),e.jsx(c,{value:"sn",children:"SN"})]}),O=()=>{t.length===d.length?x([]):x(d.map(a=>a.id))},L=async()=>{await J.getBrands(),E(V)},p=async a=>{try{const s=await w.del(a?[a]:t)}catch{}},q=a=>a.map(s=>{const{id:h,id_tag:j,sn:G}=s;return{id:h,id_tag:j,sn:G,...s.brand_model,out_current_max:parseInt(`${s.brand_model.out_current_max}`,10),out_current_min:parseInt(`${s.brand_model.out_current_min}`,10),out_power_max:parseInt(`${s.brand_model.out_power_max}`,10),out_power_min:parseInt(`${s.brand_model.out_power_min}`,10),out_voltage_max:parseInt(`${s.brand_model.out_voltage_max}`,10),out_voltage_min:parseInt(`${s.brand_model.out_voltage_min}`,10),connector_type:s.brand_model.charge_model==="AC"?"ac - type2":"dc - ccs2"}}),y=async()=>{const a=await w.queryAll(l),{results:s,count:h}=a;k(q(s||[])),D(h)};return n.useEffect(()=>{L(),y()},[]),e.jsxs("div",{className:"main-content",children:[e.jsxs("div",{className:"search-area flex items-center justify-start",children:[e.jsxs("div",{className:"search-item",children:[e.jsx("div",{className:"label",children:"Enter"}),e.jsx(W,{addonBefore:K,placeholder:u==="id_tag"?"Charge Point":"SN",allowClear:!0,value:l[u],onChange:a=>o({...l,[u]:a.target.value})})]}),e.jsxs("div",{className:"search-item ",children:[e.jsx("div",{className:"label",children:"Brand"}),e.jsx(m,{placeholder:"Brand",allowClear:!0,className:"w-full",style:{width:"150px"},value:l.brand,onChange:a=>o({...l,brand:a,brand_model:""}),children:le.map(a=>e.jsx(c,{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{className:"search-item ",children:[e.jsx("div",{className:"label",children:"Brand Model"}),e.jsx(m,{value:l.brand_model,placeholder:"Brand Model",disabled:!l.brand,allowClear:!0,style:{width:"160px"},className:"w-full",onChange:a=>o({...l,brand_model:a}),children:l.brand&&ne[l.brand].map(a=>e.jsx(c,{value:a,children:a},a))})]}),e.jsxs("div",{className:"search-item ",children:[e.jsx("div",{className:"label",children:"Charge Model"}),e.jsxs(m,{style:{width:"160px"},value:l.charge_model,allowClear:!0,placeholder:"Charge Model",className:"w-full",onChange:a=>o({...l,charge_model:a}),children:[e.jsx(c,{value:"AC",children:"AC"}),e.jsx(c,{value:"DC",children:"DC"})]})]}),e.jsx("div",{className:"search-btn",children:e.jsx(r,{icon:e.jsx(i,{icon:"Search",size:"20"}),type:"primary",onClick:Y})}),e.jsx("div",{className:"search-btn clear",children:e.jsx(r,{icon:e.jsx(i,{icon:"Close",size:"24",color:"#999"}),type:"primary",onClick:()=>o({})})})]}),e.jsxs("div",{className:"operation-area flex items-center justify-start",children:[e.jsxs(g.Group,{className:"layout-switch",value:N,onChange:a=>I(a.target.value),children:[e.jsx(g.Button,{value:"list",children:e.jsxs("div",{className:"layout-switch-item",children:[e.jsx(f,{icon:"mynaui:list",size:20}),"List"]})}),e.jsx(g.Button,{value:"grid",children:e.jsxs("div",{className:"layout-switch-item",children:[e.jsx(f,{icon:"proicons:grid",size:20}),"Grid"]})})]}),e.jsx(r,{className:"ml-3 mr-3",type:"primary",icon:e.jsx(i,{icon:"Add",size:"20"}),onClick:()=>C(!0),children:"Add Charge Point"}),e.jsx(v,{title:"Confirm delete?",onConfirm:()=>{p()},placement:"bottom",okText:"Confirm",cancelText:"Cancel",children:e.jsx(r,{disabled:t.length===0,danger:!0,icon:e.jsx(i,{icon:"Delete",size:"20",color:t.length===0?"#999":"currentColor"}),children:"Bulk Delete"})})]}),N==="list"?e.jsx(Z,{bordered:!0,rowSelection:$,columns:R,dataSource:d,pagination:!1,rowKey:"id"}):e.jsxs("div",{className:"grid-wrapper",children:[e.jsx(S,{className:"check-all",checked:d.length===t.length,onChange:O}),e.jsx("div",{className:"grid",children:d.map(a=>e.jsx("div",{className:"grid-item",children:e.jsxs(ee,{hoverable:!0,className:"flex flex-col",children:[e.jsxs("div",{className:"grid-top with-image flex items-center",children:[e.jsx(S,{checked:t.includes(a.id),onChange:s=>{const h=s.target.checked?[...t,a.id]:t.filter(j=>j!==a.id);x(h)}}),e.jsx(ae,{src:X,preview:!1,height:184,className:"entity-image object-cover"})]}),e.jsxs("div",{className:"grid-bottom",children:[e.jsx("div",{className:"display-item",children:e.jsx(r,{type:"link",className:"detail-link",onClick:()=>{_(a)},children:a.id_tag})}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"SN:"})," ",e.jsx("span",{className:"value",children:a.sn})]}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"Brand:"})," ",e.jsx("span",{className:"value",children:a.brand})]}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"Brand Model:"})," ",e.jsx("span",{className:"value",children:a.brand_model})]}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"Charge Model:"})," ",e.jsx("span",{className:"value",children:a.charge_model.toUpperCase()})]}),e.jsx("div",{className:"operation-rows",children:e.jsx(v,{title:"Confirm delete?",onConfirm:()=>{p(a.id)},placement:"bottom",okText:"Confirm",cancelText:"Cancel",children:e.jsx(r,{type:"link",danger:!0,icon:e.jsx(i,{icon:"Delete",size:"20",color:"#FF4747"}),children:"Delete"})})})]})]},a.id)}))})]}),e.jsx("div",{className:"mr-4 mt-4 flex justify-end",children:e.jsx(se,{total:B,showQuickJumper:!0})}),e.jsx(H,{visible:M,onClose:()=>b(!1),chargePoint:P,isAdmin:F}),e.jsx(U,{visible:A,onClose:()=>C(!1)})]})}export{pe as default};
