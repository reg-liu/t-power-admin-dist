import{j as x}from"./index-DjbdT0yP.js";import{g as ke,R as D,n as A,r as O}from"./vendor-react-BcJS7s_i.js";import{P as h}from"./vendor-charts-Cv5x1InZ.js";import{r as Ee}from"./index-Dj133iwh.js";import{K as ze,w as Oe,S as ce}from"./vendor-antd-AsxM9fV-.js";function Te(t,n,i,r){function e(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function l(d){try{c(r.next(d))}catch(p){o(p)}}function a(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?s(d.value):e(d.value).then(l,a)}c((r=r.apply(t,[])).next())})}function Pe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ae=function t(n,i){if(n===i)return!0;if(n&&i&&typeof n=="object"&&typeof i=="object"){if(n.constructor!==i.constructor)return!1;var r,e,s;if(Array.isArray(n)){if(r=n.length,r!=i.length)return!1;for(e=r;e--!==0;)if(!t(n[e],i[e]))return!1;return!0}if(n.constructor===RegExp)return n.source===i.source&&n.flags===i.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===i.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===i.toString();if(s=Object.keys(n),r=s.length,r!==Object.keys(i).length)return!1;for(e=r;e--!==0;)if(!Object.prototype.hasOwnProperty.call(i,s[e]))return!1;for(e=r;e--!==0;){var o=s[e];if(!t(n[o],i[o]))return!1}return!0}return n!==n&&i!==i},Ie=Pe(Ae);const de="__googleMapsScriptId";var U;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(U||(U={}));class Z{constructor({apiKey:n,authReferrerPolicy:i,channel:r,client:e,id:s=de,language:o,libraries:l=[],mapIds:a,nonce:c,region:d,retries:p=3,url:g="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=n,this.authReferrerPolicy=i,this.channel=r,this.client=e,this.id=s||de,this.language=o,this.libraries=l,this.mapIds=a,this.nonce=c,this.region=d,this.retries=p,this.url=g,this.version=m,Z.instance){if(!Ie(this.options,Z.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Z.instance.options)}`);return Z.instance}Z.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?U.FAILURE:this.done?U.SUCCESS:this.loading?U.LOADING:U.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let n=this.url;return n+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(n+=`&key=${this.apiKey}`),this.channel&&(n+=`&channel=${this.channel}`),this.client&&(n+=`&client=${this.client}`),this.libraries.length>0&&(n+=`&libraries=${this.libraries.join(",")}`),this.language&&(n+=`&language=${this.language}`),this.region&&(n+=`&region=${this.region}`),this.version&&(n+=`&v=${this.version}`),this.mapIds&&(n+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(n+=`&auth_referrer_policy=${this.authReferrerPolicy}`),n}deleteScript(){const n=document.getElementById(this.id);n&&n.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((n,i)=>{this.loadCallback(r=>{r?i(r.error):n(window.google)})})}importLibrary(n){return this.execute(),google.maps.importLibrary(n)}loadCallback(n){this.callbacks.push(n),this.execute()}setScript(){var n,i;if(document.getElementById(this.id)){this.callback();return}const r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(s=>!r[s]&&delete r[s]),!((i=(n=window?.google)===null||n===void 0?void 0:n.maps)===null||i===void 0)&&i.importLibrary||(s=>{let o,l,a,c="The Google Maps JavaScript API",d="google",p="importLibrary",g="__ib__",m=document,v=window;v=v[d]||(v[d]={});const S=v.maps||(v.maps={}),z=new Set,L=new URLSearchParams,j=()=>o||(o=new Promise((f,C)=>Te(this,void 0,void 0,function*(){var M;yield l=m.createElement("script"),l.id=this.id,L.set("libraries",[...z]+"");for(a in s)L.set(a.replace(/[A-Z]/g,u=>"_"+u[0].toLowerCase()),s[a]);L.set("callback",d+".maps."+g),l.src=this.url+"?"+L,S[g]=f,l.onerror=()=>o=C(Error(c+" could not load.")),l.nonce=this.nonce||((M=m.querySelector("script[nonce]"))===null||M===void 0?void 0:M.nonce)||"",m.head.append(l)})));S[p]||(S[p]=(f,...C)=>z.add(f)&&j().then(()=>S[p](f,...C)))})(r);const e=this.libraries.map(s=>this.importLibrary(s));e.length||e.push(this.importLibrary("core")),Promise.all(e).then(()=>this.callback(),s=>{const o=new ErrorEvent("error",{error:s});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(n){if(this.errors.push(n),this.errors.length<=this.retries){const i=this.errors.length*Math.pow(2,this.errors.length);setTimeout(()=>{this.deleteScript(),this.setScript()},i)}else this.onerrorEvent=n,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(n=>{n(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){this.callback();return}this.loading=!0,this.setScript()}}}var je=H;function H(t,n){this.x=t,this.y=n}H.prototype={clone:function(){return new H(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,i=t.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=n,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),i=Math.sin(t),r=n*this.x-i*this.y,e=i*this.x+n*this.y;return this.x=r,this.y=e,this},_rotateAround:function(t,n){var i=Math.cos(t),r=Math.sin(t),e=n.x+i*(this.x-n.x)-r*(this.y-n.y),s=n.y+r*(this.x-n.x)+i*(this.y-n.y);return this.x=e,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};H.convert=function(t){return t instanceof H?t:Array.isArray(t)?new H(t[0],t[1]):t};const R=ke(je);function b(){return(b=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function ee(t,n){var i,r;t.prototype=Object.create(n.prototype),t.prototype.constructor=t,i=t,r=n,(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e})(i,r)}function te(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ne={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},Ze=function(t){function n(){return t.apply(this,arguments)||this}ee(n,t);var i=n.prototype;return i.shouldComponentUpdate=function(){return!1},i.render=function(){return D.createElement("div",{ref:this.props.registerChild,style:Ne})},n}(O.Component),fe=function(t){function n(r){var e;return(e=t.call(this)||this).gmapInstance=r,e}ee(n,t);var i=n.prototype;return i.getChildren=function(){return this.gmapInstance.props.children},i.getMousePosition=function(){return this.gmapInstance.mouse_},i.getUpdateCounter=function(){return this.gmapInstance.updateCounter_},i.dispose=function(){this.gmapInstance=null,this.removeAllListeners()},n}(Ee),$=function(t,n){for(var i=b({},(function(s){if(s==null)throw new TypeError("Cannot destructure "+s)}(t),t)),r=0;r<n.length;r++){var e=n[r];e in i&&delete i[e]}return i},Re=Object.prototype.hasOwnProperty;function me(t,n){return t===n?t!==0||n!==0||1/t==1/n:t!=t&&n!=n}function E(t,n){if(me(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),r=Object.keys(n);if(i.length!==r.length)return!1;for(var e=0;e<i.length;e++)if(!Re.call(n,i[e])||!me(t[i[e]],n[i[e]]))return!1;return!0}var Ue={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},He={width:0,height:0,left:0,top:0,backgroundColor:"transparent",position:"absolute"},J=function(t){function n(r){var e;return(e=t.call(this,r)||this)._getState=function(){return{children:e.props.dispatcher.getChildren(),updateCounter:e.props.dispatcher.getUpdateCounter()}},e._onChangeHandler=function(){if(e.dimensionsCache_){var s=(e.state.children||[]).length,o=e._getState();e.setState(o,function(){return(o.children||[]).length!==s&&e._onMouseChangeHandler()})}},e._onChildClick=function(){e.props.onChildClick&&e.hoverChildProps_&&e.props.onChildClick(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseDown=function(){e.props.onChildMouseDown&&e.hoverChildProps_&&e.props.onChildMouseDown(e.hoverKey_,e.hoverChildProps_)},e._onChildMouseEnter=function(s,o){e.dimensionsCache_&&(e.props.onChildMouseEnter&&e.props.onChildMouseEnter(s,o),e.hoverChildProps_=o,e.hoverKey_=s,e.setState({hoverKey:s}))},e._onChildMouseLeave=function(){if(e.dimensionsCache_){var s=e.hoverKey_;s!=null&&(e.props.onChildMouseLeave&&e.props.onChildMouseLeave(s,e.hoverChildProps_),e.hoverKey_=null,e.hoverChildProps_=null,e.setState({hoverKey:null}))}},e._onMouseAllow=function(s){s||e._onChildMouseLeave(),e.allowMouse_=s},e._onMouseChangeHandler=function(){e.allowMouse_&&e._onMouseChangeHandlerRaf()},e._onMouseChangeHandlerRaf=function(){if(e.dimensionsCache_){var s=e.props.dispatcher.getMousePosition();if(s){var o=[],l=e.props.getHoverDistance();if(D.Children.forEach(e.state.children,function(d,p){if(d&&(d.props.latLng!==void 0||d.props.lat!==void 0||d.props.lng!==void 0)){var g=d.key!=null?d.key:p,m=e.props.distanceToMouse(e.dimensionsCache_[g],s,d.props);m<l&&o.push({key:g,dist:m,props:d.props})}}),o.length){o.sort(function(d,p){return d.dist-p.dist});var a=o[0].key,c=o[0].props;e.hoverKey_!==a&&(e._onChildMouseLeave(),e._onChildMouseEnter(a,c))}else e._onChildMouseLeave()}else e._onChildMouseLeave()}},e._getDimensions=function(s){return e.dimensionsCache_[s]},e.dimensionsCache_={},e.hoverKey_=null,e.hoverChildProps_=null,e.allowMouse_=!0,e.state=b({},e._getState(),{hoverKey:null}),e}ee(n,t);var i=n.prototype;return i.componentDidMount=function(){this.props.dispatcher.on("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.on("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.on("kON_CLICK",this._onChildClick),this.props.dispatcher.on("kON_MDOWN",this._onChildMouseDown)},i.shouldComponentUpdate=function(r,e){return this.props.experimental===!0?!E(this.props,r)||!E($(this.state,["hoverKey"]),$(e,["hoverKey"])):!E(this.props,r)||!E(this.state,e)},i.componentWillUnmount=function(){this.props.dispatcher.removeListener("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.removeListener("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.removeListener("kON_CLICK",this._onChildClick),this.props.dispatcher.removeListener("kON_MDOWN",this._onChildMouseDown),this.dimensionsCache_=null},i.render=function(){var r=this,e=this.props.style||Ue;this.dimensionsCache_={};var s=D.Children.map(this.state.children,function(o,l){if(o){if(o.props.latLng===void 0&&o.props.lat===void 0&&o.props.lng===void 0)return D.cloneElement(o,{$geoService:r.props.geoService,$onMouseAllow:r._onMouseAllow,$prerender:r.props.prerender});var a=o.props.latLng!==void 0?o.props.latLng:{lat:o.props.lat,lng:o.props.lng},c=r.props.insideMapPanes?r.props.geoService.fromLatLngToDivPixel(a):r.props.geoService.fromLatLngToCenterPixel(a),d={left:c.x,top:c.y};if(o.props.seLatLng!==void 0||o.props.seLat!==void 0&&o.props.seLng!==void 0){var p=o.props.seLatLng!==void 0?o.props.seLatLng:{lat:o.props.seLat,lng:o.props.seLng},g=r.props.insideMapPanes?r.props.geoService.fromLatLngToDivPixel(p):r.props.geoService.fromLatLngToCenterPixel(p);d.width=g.x-c.x,d.height=g.y-c.y}var m=r.props.geoService.fromLatLngToContainerPixel(a),v=o.key!=null?o.key:l;return r.dimensionsCache_[v]=b({x:m.x,y:m.y},a),D.createElement("div",{key:v,style:b({},He,d),className:o.props.$markerHolderClassName},D.cloneElement(o,{$hover:v===r.state.hoverKey,$getDimensions:r._getDimensions,$dimensionKey:v,$geoService:r.props.geoService,$onMouseAllow:r._onMouseAllow,$prerender:r.props.prerender}))}});return D.createElement("div",{style:e},s)},n}(O.Component);J.propTypes={geoService:h.any,style:h.any,distanceToMouse:h.func,dispatcher:h.any,onChildClick:h.func,onChildMouseDown:h.func,onChildMouseLeave:h.func,onChildMouseEnter:h.func,getHoverDistance:h.func,insideMapPanes:h.bool,prerender:h.bool},J.defaultProps={insideMapPanes:!1,prerender:!1};var Ke={width:"50%",height:"50%",left:"50%",top:"50%",margin:0,padding:0,position:"absolute"};function Fe(t){return D.createElement("div",{style:Ke},D.createElement(J,b({},t,{prerender:!0})))}var ne,F,se,Be=["key"],Ge=new Promise(function(t){se=t}),ge=function(t,n){if(!t)return Ge;if(F)return F;t.libraries||(t.libraries=[]);var i=[].concat(t.libraries);if(n&&(i.length!==0&&i.includes("visualization")||i.push("visualization")),typeof window>"u")throw new Error("google map cannot be loaded outside browser env");var r=t.key,e=function(s,o){if(s==null)return{};var l,a,c={},d=Object.keys(s);for(a=0;a<d.length;a++)o.indexOf(l=d[a])>=0||(c[l]=s[l]);return c}(t,Be);return ne||(ne=new Z(b({apiKey:r||""},e,{libraries:i}))),F=ne.load().then(function(){return se(window.google.maps),window.google.maps}),se(F),F};function De(t,n,i){var r=i-n;return t===i?t:((t-n)%r+r)%r+n}var I=function(){function t(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid LatLng object: ("+n+", "+i+")");this.lat=+n,this.lng=+i}return t.prototype.wrap=function(){return new t(this.lat,De(this.lng,-180,180))},t}();I.convert=function(t){return t instanceof I?t:Array.isArray(t)?new I(t[0],t[1]):"lng"in t&&"lat"in t?new I(t.lat,t.lng):t};var We=function(){function t(e,s,o){this.tileSize=e||512,this._minZoom=s||0,this._maxZoom=o||52,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new I(0,0),this.angle=0}var n,i,r=t.prototype;return r.zoomScale=function(e){return Math.pow(2,e)},r.scaleZoom=function(e){return Math.log(e)/Math.LN2},r.project=function(e,s){return new R(this.lngX(e.lng,s),this.latY(e.lat,s))},r.unproject=function(e,s){return new I(this.yLat(e.y,s),this.xLng(e.x,s))},r.lngX=function(e,s){return(180+e)*(s||this.worldSize)/360},r.latY=function(e,s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*(s||this.worldSize)/360},r.xLng=function(e,s){return 360*e/(s||this.worldSize)-180},r.yLat=function(e,s){return 360/Math.PI*Math.atan(Math.exp((180-360*e/(s||this.worldSize))*Math.PI/180))-90},r.locationPoint=function(e){var s=this.project(e);return this.centerPoint._sub(this.point._sub(s)._rotate(this.angle))},r.pointLocation=function(e){var s=this.centerPoint._sub(e)._rotate(-this.angle);return this.unproject(this.point.sub(s))},n=t,(i=[{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom=e,this.zoom=Math.max(this.zoom,e)}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom=e,this.zoom=Math.min(this.zoom,e)}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerPoint",get:function(){return new R(0,0)}},{key:"size",get:function(){return new R(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){this.angle=-De(e,-180,180)*Math.PI/180}},{key:"zoom",get:function(){return this._zoom},set:function(e){var s=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}},{key:"x",get:function(){return this.lngX(this.center.lng)}},{key:"y",get:function(){return this.latY(this.center.lat)}},{key:"point",get:function(){return new R(this.x,this.y)}}])&&function(e,s){for(var o=0;o<s.length;o++){var l=s[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,typeof(a=function(c,d){if(typeof c!="object"||c===null)return c;var p=c[Symbol.toPrimitive];if(p!==void 0){var g=p.call(c,"string");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}(l.key))=="symbol"?a:String(a),l)}var a}(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(),$e=function(){function t(i){this.hasSize_=!1,this.hasView_=!1,this.transform_=new We(i||512)}var n=t.prototype;return n.setView=function(i,r,e){this.transform_.center=I.convert(i),this.transform_.zoom=+r,this.transform_.bearing=+e,this.hasView_=!0},n.setViewSize=function(i,r){this.transform_.width=i,this.transform_.height=r,this.hasSize_=!0},n.setMapCanvasProjection=function(i,r){this.maps_=i,this.mapCanvasProjection_=r},n.canProject=function(){return this.hasSize_&&this.hasView_},n.hasSize=function(){return this.hasSize_},n.fromLatLngToCenterPixel=function(i){return this.transform_.locationPoint(I.convert(i))},n.fromLatLngToDivPixel=function(i){if(this.mapCanvasProjection_){var r=new this.maps_.LatLng(i.lat,i.lng);return this.mapCanvasProjection_.fromLatLngToDivPixel(r)}return this.fromLatLngToCenterPixel(i)},n.fromLatLngToContainerPixel=function(i){if(this.mapCanvasProjection_){var r=new this.maps_.LatLng(i.lat,i.lng);return this.mapCanvasProjection_.fromLatLngToContainerPixel(r)}var e=this.fromLatLngToCenterPixel(i);return e.x-=this.transform_.worldSize*Math.round(e.x/this.transform_.worldSize),e.x+=this.transform_.width/2,e.y+=this.transform_.height/2,e},n.fromContainerPixelToLatLng=function(i){if(this.mapCanvasProjection_){var r=this.mapCanvasProjection_.fromContainerPixelToLatLng(i);return{lat:r.lat(),lng:r.lng()}}var e=b({},i);e.x-=this.transform_.width/2,e.y-=this.transform_.height/2;var s=this.transform_.pointLocation(R.convert(e));return s.lng-=360*Math.round(s.lng/360),s},n.getWidth=function(){return this.transform_.width},n.getHeight=function(){return this.transform_.height},n.getZoom=function(){return this.transform_.zoom},n.getCenter=function(){return this.transform_.pointLocation({x:0,y:0})},n.getBounds=function(i,r){var e=i&&i[0]||0,s=i&&i[1]||0,o=i&&i[2]||0,l=i&&i[3]||0;if(this.getWidth()-s-l>0&&this.getHeight()-e-o>0){var a=this.transform_.pointLocation(R.convert({x:l-this.getWidth()/2,y:e-this.getHeight()/2})),c=this.transform_.pointLocation(R.convert({x:this.getWidth()/2-s,y:this.getHeight()/2-o})),d=[a.lat,a.lng,c.lat,c.lng,c.lat,a.lng,a.lat,c.lng];return r&&(d=d.map(function(p){return Math.round(p*r)/r})),d}return[0,0,0,0]},t}();function _e(t){if(window.requestAnimationFrame)return window.requestAnimationFrame(t);var n=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return n?n(t):window.setTimeout(t,1e3/60)}var qe=Math.log2?Math.log2:function(t){return Math.log(t)/Math.LN2};function ve(t,n){return Object.keys(t).reduce(function(i,r){return n(t[r])&&(i[r]=t[r]),i},{})}var N=function(t){if(t!==null&&typeof t=="object"){if(Object.keys(t).length===0)return!0}else if(t==null||t==="")return!0;return!1},Ve=Object.prototype.toString;function q(t){return typeof t=="number"||function(n){return!!n&&typeof n=="object"}(t)&&Ve.call(t)==="[object Number]"}var V=null;function ye(){if(V)return V;if(typeof navigator<"u"){var t=navigator.userAgent.indexOf("MSIE")>-1,n=navigator.userAgent.indexOf("Firefox")>-1,i=navigator.userAgent.toLowerCase().indexOf("op")>-1,r=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Safari")>-1;return r&&e&&(e=!1),r&&i&&(r=!1),V={isExplorer:t,isFirefox:n,isOpera:i,isChrome:r,isSafari:e}}return V={isChrome:!0,isExplorer:!1,isFirefox:!1,isOpera:!1,isSafari:!1}}var Ce=function(t){return Function.prototype.toString.call(t)};function W(t){if(!t||typeof t!="object")return!1;var n=typeof t.constructor=="function"?Object.getPrototypeOf(t):Object.prototype;if(n===null)return!0;var i=n.constructor;return typeof i=="function"&&i instanceof i&&Ce(i)===Ce(Object)}function B(t,n,i,r){t.addEventListener(n,i,function(){var e=!1;try{var s=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch{e=!1}return e}()?{capture:r,passive:!0}:r)}var T,ae=!(typeof window>"u"||!window.document||!window.document.createElement);T=ae?window:typeof self<"u"?self:void 0;var Me,le=typeof document<"u"&&document.attachEvent,we=!1;if(ae&&!le){var Qe=function(){var t=T.requestAnimationFrame||T.mozRequestAnimationFrame||T.webkitRequestAnimationFrame||function(n){return T.setTimeout(n,20)};return function(n){return t(n)}}(),Xe=(Me=T.cancelAnimationFrame||T.mozCancelAnimationFrame||T.webkitCancelAnimationFrame||T.clearTimeout,function(t){return Me(t)}),ue=function(t){var n=t.__resizeTriggers__,i=n.firstElementChild,r=n.lastElementChild,e=i.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,e.style.width=i.offsetWidth+1+"px",e.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight},be=function(t){var n=this;ue(this),this.__resizeRAF__&&Xe(this.__resizeRAF__),this.__resizeRAF__=Qe(function(){(function(i){return i.offsetWidth!=i.__resizeLast__.width||i.offsetHeight!=i.__resizeLast__.height})(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(i){i.call(n,t)}))})},oe=!1,ie="",pe="animationstart",re="Webkit Moz O ms".split(" "),Ye="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");if(ae){var Le=document.createElement("fakeelement");if(Le.style.animationName!==void 0&&(oe=!0),oe===!1){for(var G=0;G<re.length;G++)if(Le.style[re[G]+"AnimationName"]!==void 0){ie="-"+re[G].toLowerCase()+"-",pe=Ye[G],oe=!0;break}}}var he="resizeanim",Je="@"+ie+"keyframes "+he+" { from { opacity: 0; } to { opacity: 0; } } ",et=ie+"animation: 1ms "+he+"; "}var X=A.createPortal!==void 0,Se=X?A.createPortal:A.unstable_renderSubtreeIntoContainer,Q=function(t){return W(t)?t:{lat:t[0],lng:t[1]}},xe=function(t,n){return n<t?t:n},Y=function(t){function n(r){var e;if((e=t.call(this,r)||this)._getMinZoom=function(){if(e.geoService_.getWidth()>0||e.geoService_.getHeight()>0){var o=Math.ceil(e.geoService_.getWidth()/256)+2,l=Math.ceil(e.geoService_.getHeight()/256)+2,a=Math.max(o,l);return Math.ceil(qe(a))}return 3},e._computeMinZoom=function(o){return N(o)?e._getMinZoom():o},e._mapDomResizeCallback=function(){if(e.resetSizeOnIdle_=!0,e.maps_){var o=e.props.center||e.props.defaultCenter,l=e.map_.getCenter();e.maps_.event.trigger(e.map_,"resize"),e.map_.setCenter(e.props.resetBoundsOnResize?o:l)}},e._setLayers=function(o){o.forEach(function(l){e.layers_[l]=new e.maps_[l],e.layers_[l].setMap(e.map_)})},e._renderPortal=function(){return D.createElement(J,{experimental:e.props.experimental,onChildClick:e._onChildClick,onChildMouseDown:e._onChildMouseDown,onChildMouseEnter:e._onChildMouseEnter,onChildMouseLeave:e._onChildMouseLeave,geoService:e.geoService_,insideMapPanes:!0,distanceToMouse:e.props.distanceToMouse,getHoverDistance:e._getHoverDistance,dispatcher:e.markersDispatcher_})},e._initMap=function(){if(!e.initialized_){e.initialized_=!0;var o=Q(e.props.center||e.props.defaultCenter);e.geoService_.setView(o,e.props.zoom||e.props.defaultZoom,0),e._onBoundsChanged();var l=b({},e.props.apiKey&&{key:e.props.apiKey},e.props.bootstrapURLKeys);e.props.googleMapLoader(l,e.props.heatmapLibrary).then(function(a){if(e.mounted_){var c,d,p=e.geoService_.getCenter(),g={zoom:e.props.zoom||e.props.defaultZoom,center:new a.LatLng(p.lat,p.lng)};e.props.heatmap.positions&&(Object.assign(te(e),{heatmap:(c=a,d=e.props.heatmap,new c.visualization.HeatmapLayer({data:d.positions.reduce(function(_,k){var y=k.weight,w=y===void 0?1:y;return _.push({location:new c.LatLng(k.lat,k.lng),weight:w}),_},[])}))}),function(_,k){var y=k.options,w=y===void 0?{}:y;Object.keys(w).map(function(K){return _.set(K,w[K])})}(e.heatmap,e.props.heatmap));var m=ve(a,W),v=typeof e.props.options=="function"?e.props.options(m):e.props.options,S=!N(e.props.draggable)&&{draggable:e.props.draggable},z=e._computeMinZoom(v.minZoom);e.minZoom_=z;var L=b({},{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3},{minZoom:z},v,g);e.defaultDraggableOption_=N(L.draggable)?e.defaultDraggableOption_:L.draggable;var j=b({},L,S);j.minZoom=xe(j.minZoom,z);var f=new a.Map(A.findDOMNode(e.googleMapDom_),j);e.map_=f,e.maps_=a,e._setLayers(e.props.layerTypes);var C=a.version.match(/^3\.(\d+)\./),M=C&&Number(C[1]),u=te(e),P=Object.assign(new a.OverlayView,{onAdd:function(){var _=typeof screen<"u"?screen.width+"px":"2000px",k=typeof screen<"u"?screen.height+"px":"2000px",y=document.createElement("div");if(y.style.backgroundColor="transparent",y.style.position="absolute",y.style.left="0px",y.style.top="0px",y.style.width=_,y.style.height=k,u.props.overlayViewDivStyle){var w=u.props.overlayViewDivStyle;typeof w=="object"&&Object.keys(w).forEach(function(K){y.style[K]=w[K]})}this.getPanes().overlayMouseTarget.appendChild(y),u.geoService_.setMapCanvasProjection(a,P.getProjection()),X?u.setState({overlay:y}):Se(u,u._renderPortal(),y,function(){return u.setState({overlay:y})})},onRemove:function(){var _=u.state.overlay;_&&!X&&A.unmountComponentAtNode(_),u.setState({overlay:null})},draw:function(){if(u.updateCounter_++,u._onBoundsChanged(f,a,!u.props.debounced),u.googleApiLoadedCalled_||(u._onGoogleApiLoaded({map:f,maps:a,ref:u.googleMapDom_}),u.googleApiLoadedCalled_=!0),u.mouse_){var _=u.geoService_.fromContainerPixelToLatLng(u.mouse_);u.mouse_.lat=_.lat,u.mouse_.lng=_.lng}u._onChildMouseMove(),u.markersDispatcher_&&(u.markersDispatcher_.emit("kON_CHANGE"),u.fireMouseEventOnIdle_&&u.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"))}});e.overlay_=P,P.setMap(f),e.props.heatmap.positions&&e.heatmap.setMap(f),e.props.onTilesLoaded&&a.event.addListener(f,"tilesloaded",function(){u._onTilesLoaded()}),a.event.addListener(f,"zoom_changed",function(){u.geoService_.getZoom()!==f.getZoom()&&(u.zoomAnimationInProgress_||(u.zoomAnimationInProgress_=!0,u._onZoomAnimationStart(f.zoom)),M<32)&&(new Date().getTime()-e.zoomControlClickTime_<300?_e(function(){return _e(function(){u.updateCounter_++,u._onBoundsChanged(f,a)})}):(u.updateCounter_++,u._onBoundsChanged(f,a)))}),a.event.addListener(f,"idle",function(){if(e.resetSizeOnIdle_){e._setViewSize();var _=e._computeMinZoom(v.minZoom);_!==e.minZoom_&&(e.minZoom_=_,f.setOptions({minZoom:_})),e.resetSizeOnIdle_=!1}u.zoomAnimationInProgress_&&(u.zoomAnimationInProgress_=!1,u._onZoomAnimationEnd(f.zoom)),u.updateCounter_++,u._onBoundsChanged(f,a),u.dragTime_=0,u.markersDispatcher_&&u.markersDispatcher_.emit("kON_CHANGE")}),a.event.addListener(f,"mouseover",function(){u.mouseInMap_=!0}),a.event.addListener(f,"click",function(){u.mouseInMap_=!0}),a.event.addListener(f,"mouseout",function(){u.mouseInMap_=!1,u.mouse_=null,u.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}),a.event.addListener(f,"drag",function(){u.dragTime_=new Date().getTime(),u._onDrag(f)}),a.event.addListener(f,"dragend",function(){var _=a.event.addListener(f,"idle",function(){a.event.removeListener(_),u._onDragEnd(f)})}),a.event.addListener(f,"maptypeid_changed",function(){u._onMapTypeIdChange(f.getMapTypeId())})}}).catch(function(a){throw e._onGoogleApiLoaded({map:null,maps:null,ref:e.googleMapDom_}),a})}},e._onGoogleApiLoaded=function(){var o;e.props.onGoogleApiLoaded&&(o=e.props).onGoogleApiLoaded.apply(o,arguments)},e._getHoverDistance=function(){return e.props.hoverDistance},e._onDrag=function(){var o;return e.props.onDrag&&(o=e.props).onDrag.apply(o,arguments)},e._onDragEnd=function(){var o;return e.props.onDragEnd&&(o=e.props).onDragEnd.apply(o,arguments)},e._onMapTypeIdChange=function(){var o;return e.props.onMapTypeIdChange&&(o=e.props).onMapTypeIdChange.apply(o,arguments)},e._onZoomAnimationStart=function(){var o;return e.props.onZoomAnimationStart&&(o=e.props).onZoomAnimationStart.apply(o,arguments)},e._onZoomAnimationEnd=function(){var o;return e.props.onZoomAnimationEnd&&(o=e.props).onZoomAnimationEnd.apply(o,arguments)},e._onTilesLoaded=function(){return e.props.onTilesLoaded&&e.props.onTilesLoaded()},e._onChildClick=function(){var o;if(e.props.onChildClick)return(o=e.props).onChildClick.apply(o,arguments)},e._onChildMouseDown=function(o,l){e.childMouseDownArgs_=[o,l],e.props.onChildMouseDown&&e.props.onChildMouseDown(o,l,b({},e.mouse_))},e._onChildMouseUp=function(){var o;e.childMouseDownArgs_&&(e.props.onChildMouseUp&&(o=e.props).onChildMouseUp.apply(o,e.childMouseDownArgs_.concat([b({},e.mouse_)])),e.childMouseDownArgs_=null,e.childMouseUpTime_=new Date().getTime())},e._onChildMouseMove=function(){var o;e.childMouseDownArgs_&&e.props.onChildMouseMove&&(o=e.props).onChildMouseMove.apply(o,e.childMouseDownArgs_.concat([b({},e.mouse_)]))},e._onChildMouseEnter=function(){var o;if(e.props.onChildMouseEnter)return(o=e.props).onChildMouseEnter.apply(o,arguments)},e._onChildMouseLeave=function(){var o;if(e.props.onChildMouseLeave)return(o=e.props).onChildMouseLeave.apply(o,arguments)},e._setViewSize=function(){if(e.mounted_){if(document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)e.geoService_.setViewSize(window.innerWidth,window.innerHeight);else{var o=A.findDOMNode(e.googleMapDom_);e.geoService_.setViewSize(o.clientWidth,o.clientHeight)}e._onBoundsChanged()}},e._onWindowResize=function(){e.resetSizeOnIdle_=!0},e._onMapMouseMove=function(o){if(e.mouseInMap_){var l=new Date().getTime();l-e.mouseMoveTime_>50&&(e.boundingRect_=o.currentTarget.getBoundingClientRect()),e.mouseMoveTime_=l;var a=o.clientX-e.boundingRect_.left,c=o.clientY-e.boundingRect_.top;e.mouse_||(e.mouse_={x:0,y:0,lat:0,lng:0}),e.mouse_.x=a,e.mouse_.y=c;var d=e.geoService_.fromContainerPixelToLatLng(e.mouse_);e.mouse_.lat=d.lat,e.mouse_.lng=d.lng,e._onChildMouseMove(),l-e.dragTime_<100?e.fireMouseEventOnIdle_=!0:(e.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"),e.fireMouseEventOnIdle_=!1)}},e._onClick=function(){var o;return e.props.onClick&&!e.childMouseDownArgs_&&new Date().getTime()-e.childMouseUpTime_>300&&e.dragTime_===0&&(o=e.props).onClick.apply(o,arguments)},e._onMapClick=function(o){e.markersDispatcher_&&(e._onMapMouseMove(o),new Date().getTime()-e.dragTime_>100&&(e.mouse_&&e._onClick(b({},e.mouse_,{event:o})),e.markersDispatcher_.emit("kON_CLICK",o)))},e._onMapMouseDownNative=function(o){e.mouseInMap_&&e._onMapMouseDown(o)},e._onMapMouseDown=function(o){e.markersDispatcher_&&new Date().getTime()-e.dragTime_>100&&(e._onMapMouseMove(o),e.markersDispatcher_.emit("kON_MDOWN",o))},e._onMapMouseDownCapture=function(){ye().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._onKeyDownCapture=function(){ye().isChrome&&(e.zoomControlClickTime_=new Date().getTime())},e._isCenterDefined=function(o){return o&&(W(o)&&q(o.lat)&&q(o.lng)||o.length===2&&q(o[0])&&q(o[1]))},e._onBoundsChanged=function(o,l,a){if(o){var c=o.getCenter();e.geoService_.setView([c.lat(),c.lng()],o.getZoom(),0)}if((e.props.onChange||e.props.onBoundsChange)&&e.geoService_.canProject()){var d=e.geoService_.getZoom(),p=e.geoService_.getBounds(),g=e.geoService_.getCenter();if(!function(v,S,z){if(v&&S){for(var L=0;L!==v.length;++L)if(Math.abs(v[L]-S[L])>1e-5)return!1;return!0}return!1}(p,e.prevBounds_)&&a!==!1){var m=e.geoService_.getBounds(e.props.margin);e.props.onBoundsChange&&e.props.onBoundsChange(e.centerIsObject_?b({},g):[g.lat,g.lng],d,p,m),e.props.onChange&&e.props.onChange({center:b({},g),zoom:d,bounds:{nw:{lat:p[0],lng:p[1]},se:{lat:p[2],lng:p[3]},sw:{lat:p[4],lng:p[5]},ne:{lat:p[6],lng:p[7]}},marginBounds:{nw:{lat:m[0],lng:m[1]},se:{lat:m[2],lng:m[3]},sw:{lat:m[4],lng:m[5]},ne:{lat:m[6],lng:m[7]}},size:e.geoService_.hasSize()?{width:e.geoService_.getWidth(),height:e.geoService_.getHeight()}:{width:0,height:0}}),e.prevBounds_=p}}},e._registerChild=function(o){e.googleMapDom_=o},e.mounted_=!1,e.initialized_=!1,e.googleApiLoadedCalled_=!1,e.map_=null,e.maps_=null,e.prevBounds_=null,e.heatmap=null,e.layers_={},e.mouse_=null,e.mouseMoveTime_=0,e.boundingRect_=null,e.mouseInMap_=!0,e.dragTime_=0,e.fireMouseEventOnIdle_=!1,e.updateCounter_=0,e.markersDispatcher_=new fe(te(e)),e.geoService_=new $e(256),e.centerIsObject_=W(e.props.center),e.minZoom_=3,e.defaultDraggableOption_=!0,e.zoomControlClickTime_=0,e.childMouseDownArgs_=null,e.childMouseUpTime_=0,e.googleMapDom_=null,e._isCenterDefined(e.props.center||e.props.defaultCenter)){var s=Q(e.props.center||e.props.defaultCenter);e.geoService_.setView(s,e.props.zoom||e.props.defaultZoom,0)}return e.zoomAnimationInProgress_=!1,e.state={overlay:null},e}ee(n,t);var i=n.prototype;return i.componentDidMount=function(){var r=this;this.mounted_=!0,this.markersDispatcher_=new fe(this),B(window,"resize",this._onWindowResize,!1),B(window,"keydown",this._onKeyDownCapture,!0);var e=A.findDOMNode(this.googleMapDom_);e&&B(e,"mousedown",this._onMapMouseDownNative,!0),B(window,"mouseup",this._onChildMouseUp,!1);var s=b({},this.props.apiKey&&{key:this.props.apiKey},this.props.bootstrapURLKeys);this.props.googleMapLoader(s,this.props.heatmapLibrary),setTimeout(function(){r._setViewSize(),r._isCenterDefined(r.props.center||r.props.defaultCenter)&&r._initMap()},0,this),this.props.resetBoundsOnResize&&function(o,l){if(o.parentNode===void 0){var a=document.createElement("div");o.parentNode=a}o=o.parentNode,le?o.attachEvent("onresize",l):(o.__resizeTriggers__||(getComputedStyle(o).position=="static"&&(o.style.position="relative"),function(){if(!we){var c=(Je||"")+".resize-triggers { "+(et||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',d=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.type="text/css",p.styleSheet?p.styleSheet.cssText=c:p.appendChild(document.createTextNode(c)),d.appendChild(p),we=!0}}(),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=document.createElement("div")).className="resize-triggers",o.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',o.appendChild(o.__resizeTriggers__),ue(o),B(o,"scroll",be,!0),pe&&o.__resizeTriggers__.addEventListener(pe,function(c){c.animationName==he&&ue(o)})),o.__resizeListeners__.push(l))}(e,this._mapDomResizeCallback)},i.shouldComponentUpdate=function(r,e){return!E($(this.props,["draggable"]),$(r,["draggable"]))||!E(this.state,e)},i.componentDidUpdate=function(r){var e=this;if(!this._isCenterDefined(r.center)&&this._isCenterDefined(this.props.center)&&setTimeout(function(){return e._initMap()},0),this.map_){var s=this.geoService_.getCenter();if(this._isCenterDefined(this.props.center)){var o=Q(this.props.center),l=this._isCenterDefined(r.center)?Q(r.center):null;(!l||Math.abs(o.lat-l.lat)+Math.abs(o.lng-l.lng)>1e-5)&&Math.abs(o.lat-s.lat)+Math.abs(o.lng-s.lng)>1e-5&&this.map_.panTo({lat:o.lat,lng:o.lng})}if(N(this.props.zoom)||Math.abs(this.props.zoom-r.zoom)>0&&this.map_.setZoom(this.props.zoom),!N(r.draggable)&&N(this.props.draggable)?this.map_.setOptions({draggable:this.defaultDraggableOption_}):E(r.draggable,this.props.draggable)||this.map_.setOptions({draggable:this.props.draggable}),!N(this.props.options)&&!E(r.options,this.props.options)){var a=ve(this.maps_,W),c=typeof this.props.options=="function"?this.props.options(a):this.props.options;if("minZoom"in(c=$(c,["zoom","center","draggable"]))){var d=this._computeMinZoom(c.minZoom);c.minZoom=xe(c.minZoom,d)}this.map_.setOptions(c)}E(this.props.layerTypes,r.layerTypes)||(Object.keys(this.layers_).forEach(function(p){e.layers_[p].setMap(null),delete e.layers_[p]}),this._setLayers(this.props.layerTypes)),this.heatmap&&!E(this.props.heatmap.positions,r.heatmap.positions)&&this.heatmap.setData(this.props.heatmap.positions.map(function(p){return{location:new e.maps_.LatLng(p.lat,p.lng),weight:p.weight}})),this.heatmap&&!E(this.props.heatmap.options,r.heatmap.options)&&Object.keys(this.props.heatmap.options).forEach(function(p){e.heatmap.set(p,e.props.heatmap.options[p])})}this.markersDispatcher_.emit("kON_CHANGE"),E(this.props.hoverDistance,r.hoverDistance)||this.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")},i.componentWillUnmount=function(){this.mounted_=!1;var r,e,s=A.findDOMNode(this.googleMapDom_);s&&s.removeEventListener("mousedown",this._onMapMouseDownNative,!0),window.removeEventListener("resize",this._onWindowResize),window.removeEventListener("keydown",this._onKeyDownCapture),window.removeEventListener("mouseup",this._onChildMouseUp,!1),this.props.resetBoundsOnResize&&(e=this._mapDomResizeCallback,r=(r=s).parentNode,le?r.detachEvent("onresize",e):(r.__resizeListeners__.splice(r.__resizeListeners__.indexOf(e),1),r.__resizeListeners__.length||(r.removeEventListener("scroll",be),r.__resizeTriggers__=!r.removeChild(r.__resizeTriggers__)))),this.overlay_&&this.overlay_.setMap(null),this.maps_&&this.map_&&this.props.shouldUnregisterMapOnUnmount&&(this.map_.setOptions({scrollwheel:!1}),this.maps_.event.clearInstanceListeners(this.map_)),this.props.shouldUnregisterMapOnUnmount&&(this.map_=null,this.maps_=null),this.markersDispatcher_.dispose(),this.resetSizeOnIdle_=!1,this.props.shouldUnregisterMapOnUnmount&&(delete this.map_,delete this.markersDispatcher_)},i.render=function(){var r=this.state.overlay,e=r?null:D.createElement(Fe,{experimental:this.props.experimental,onChildClick:this._onChildClick,onChildMouseDown:this._onChildMouseDown,onChildMouseEnter:this._onChildMouseEnter,onChildMouseLeave:this._onChildMouseLeave,geoService:this.geoService_,insideMapPanes:!1,distanceToMouse:this.props.distanceToMouse,getHoverDistance:this._getHoverDistance,dispatcher:this.markersDispatcher_});return D.createElement("div",{style:this.props.style,onMouseMove:this._onMapMouseMove,onMouseDownCapture:this._onMapMouseDownCapture,onClick:this._onMapClick},D.createElement(Ze,{registerChild:this._registerChild}),X&&r&&Se(this._renderPortal(),r),e)},n}(O.Component);Y.propTypes={apiKey:h.string,bootstrapURLKeys:h.any,defaultCenter:h.oneOfType([h.array,h.shape({lat:h.number,lng:h.number})]),center:h.oneOfType([h.array,h.shape({lat:h.number,lng:h.number})]),defaultZoom:h.number,zoom:h.number,onBoundsChange:h.func,onChange:h.func,onClick:h.func,onChildClick:h.func,onChildMouseDown:h.func,onChildMouseUp:h.func,onChildMouseMove:h.func,onChildMouseEnter:h.func,onChildMouseLeave:h.func,onZoomAnimationStart:h.func,onZoomAnimationEnd:h.func,onDrag:h.func,onDragEnd:h.func,onMapTypeIdChange:h.func,onTilesLoaded:h.func,options:h.any,distanceToMouse:h.func,hoverDistance:h.number,debounced:h.bool,margin:h.array,googleMapLoader:h.any,onGoogleApiLoaded:h.func,yesIWantToUseGoogleMapApiInternals:h.bool,draggable:h.bool,style:h.any,resetBoundsOnResize:h.bool,layerTypes:h.arrayOf(h.string),shouldUnregisterMapOnUnmount:h.bool},Y.defaultProps={distanceToMouse:function(t,n){return Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))},hoverDistance:30,debounced:!0,options:function(){return{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3}},googleMapLoader:ge,yesIWantToUseGoogleMapApiInternals:!1,style:{width:"100%",height:"100%",margin:0,padding:0,position:"relative"},layerTypes:[],heatmap:{},heatmapLibrary:!1,shouldUnregisterMapOnUnmount:!0},Y.googleMapLoader=ge;const tt="AIzaSyCQc86pm5M44jtKOZydqmr329R3aQszvaw";function nt(){const[t,n]=O.useState(!1);return O.useEffect(()=>{if(document.querySelector('script[src^="https://maps.googleapis.com/maps/api/js"]'))n(!0);else{const i=document.createElement("script");i.src=`https://maps.googleapis.com/maps/api/js?key=${tt}&libraries=places`,i.async=!0,i.onload=()=>n(!0),document.body.appendChild(i)}},[]),t}const{Option:ot}=Oe;function ut({visible:t,onClose:n,onSelect:i}){const[r,e]=O.useState(""),[s,o]=O.useState([]),[l,a]=O.useState(null),[c,d]=O.useState({lat:-37.975,lng:145.238}),[p,g]=O.useState(!1),m=O.useRef(null),v=O.useRef(null),S=nt();O.useEffect(()=>{S&&window.google&&(m.current=new window.google.maps.places.AutocompleteService,v.current=new window.google.maps.Geocoder)},[S]);const z=C=>{e(C),C.length>2&&m.current?(g(!0),m.current.getPlacePredictions({input:C},(M,u)=>{u===window.google.maps.places.PlacesServiceStatus.OK&&o(M),g(!1)})):o([])},L=C=>{v.current&&v.current.geocode({placeId:C},(M,u)=>{if(u==="OK"&&M[0]){const{lat:P,lng:_}=M[0].geometry.location,k=M[0].formatted_address||j(M[0]),y={address:k,lat:P(),lng:_()};d({lat:P(),lng:_()}),a(y),e(k)}})},j=C=>{const M=C.address_components,u=M.find(w=>w.types.includes("country"))?.short_name||"",P=M.find(w=>w.types.includes("administrative_area_level_1"))?.short_name||"",_=M.find(w=>w.types.includes("administrative_area_level_2"))?.short_name||"",k=M.find(w=>w.types.includes("locality"))?.short_name||"",y=M.find(w=>w.types.includes("postal_code"))?.long_name||"";return`${u}, ${P}, ${_}, ${k}, ${y}`},f=()=>{l&&i(l),n()};return x.jsxs(ze,{title:"Location Picker",visible:t,onOk:f,onCancel:n,width:800,bodyStyle:{height:"600px",display:"flex",flexDirection:"column"},children:[x.jsx("div",{className:"mb-4",children:x.jsx(Oe,{showSearch:!0,value:r,placeholder:"Search for a location",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:z,onChange:L,notFoundContent:p?x.jsx(ce,{size:"small"}):null,style:{width:"100%"},children:s.map(C=>x.jsx(ot,{value:C.place_id,children:C.description},C.place_id))})}),x.jsx("div",{className:"relative flex-grow",children:S?x.jsx(Y,{bootstrapURLKeys:{key:"AIzaSyCQc86pm5M44jtKOZydqmr329R3aQszvaw"},center:c,zoom:16,style:{height:"100%",width:"100%"}}):x.jsx(ce,{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 transform"})}),l&&x.jsxs("div",{className:"mt-4",children:[x.jsx("h3",{className:"text-lg font-semibold",children:"Selected Location:"}),x.jsx("p",{children:l.address}),x.jsxs("p",{children:["Latitude: ",l.lat.toFixed(6)]}),x.jsxs("p",{children:["Longitude: ",l.lng.toFixed(6)]})]})]})}export{ut as M};
