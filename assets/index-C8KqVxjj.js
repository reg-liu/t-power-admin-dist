import{j as e}from"./index-_YbBPvdW.js";import{c as K}from"./index.modern-BgdPXcnK.js";import{r as o}from"./vendor-react-BcJS7s_i.js";import{K as z,w as j,S as w}from"./vendor-antd-CIRYFt1q.js";const N="AIzaSyCQc86pm5M44jtKOZydqmr329R3aQszvaw";function P(){const[m,l]=o.useState(!1);return o.useEffect(()=>{if(document.querySelector('script[src^="https://maps.googleapis.com/maps/api/js"]'))l(!0);else{const n=document.createElement("script");n.src=`https://maps.googleapis.com/maps/api/js?key=${N}&libraries=places`,n.async=!0,n.onload=()=>l(!0),document.body.appendChild(n)}},[]),m}const{Option:Q}=j;function q({visible:m,onClose:l,onSelect:n}){const[_,S]=o.useState(""),[v,y]=o.useState([]),[c,L]=o.useState(null),[O,A]=o.useState({lat:-37.975,lng:145.238}),[M,x]=o.useState(!1),u=o.useRef(null),f=o.useRef(null),h=P();o.useEffect(()=>{h&&window.google&&(u.current=new window.google.maps.places.AutocompleteService,f.current=new window.google.maps.Geocoder)},[h]);const C=s=>{S(s),s.length>2&&u.current?(x(!0),u.current.getPlacePredictions({input:s},(t,r)=>{r===window.google.maps.places.PlacesServiceStatus.OK&&y(t),x(!1)})):y([])},R=s=>{f.current&&f.current.geocode({placeId:s},(t,r)=>{if(r==="OK"&&t[0]){const{lat:i,lng:d}=t[0].geometry.location,p=t[0].formatted_address||b(t[0]),g={address:p,lat:i(),lng:d()};A({lat:i(),lng:d()}),L(g),S(p)}})},b=s=>{const t=s.address_components,r=t.find(a=>a.types.includes("country"))?.short_name||"",i=t.find(a=>a.types.includes("administrative_area_level_1"))?.short_name||"",d=t.find(a=>a.types.includes("administrative_area_level_2"))?.short_name||"",p=t.find(a=>a.types.includes("locality"))?.short_name||"",g=t.find(a=>a.types.includes("postal_code"))?.long_name||"";return`${r}, ${i}, ${d}, ${p}, ${g}`},E=()=>{c&&n(c),l()};return e.jsxs(z,{title:"Location Picker",visible:m,onOk:E,onCancel:l,width:800,bodyStyle:{height:"600px",display:"flex",flexDirection:"column"},children:[e.jsx("div",{className:"mb-4",children:e.jsx(j,{showSearch:!0,value:_,placeholder:"Search for a location",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:C,onChange:R,notFoundContent:M?e.jsx(w,{size:"small"}):null,style:{width:"100%"},children:v.map(s=>e.jsx(Q,{value:s.place_id,children:s.description},s.place_id))})}),e.jsx("div",{className:"relative flex-grow",children:h?e.jsx(K,{bootstrapURLKeys:{key:"AIzaSyCQc86pm5M44jtKOZydqmr329R3aQszvaw"},center:O,zoom:16,style:{height:"100%",width:"100%"}}):e.jsx(w,{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 transform"})}),c&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Selected Location:"}),e.jsx("p",{children:c.address}),e.jsxs("p",{children:["Latitude: ",c.lat.toFixed(6)]}),e.jsxs("p",{children:["Longitude: ",c.lng.toFixed(6)]})]})]})}export{q as M};
