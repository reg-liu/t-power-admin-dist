import{j as e}from"./index-BcZAt6ZS.js";import{N as t,a4 as l,J as S,k as p,I as r,w as c,a2 as o,as as d,z as u,l as f}from"./vendor-antd-DTUiWunz.js";import{r as i}from"./vendor-react-BcJS7s_i.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-Bfd8ZwWc.js";function D({visible:b,onCancel:h,onConfirm:v,record:n}){const[s]=t.useForm(),[C,x]=i.useState("current"),[m,j]=i.useState(null),[g,_]=i.useState(24);i.useEffect(()=>{n&&(s.setFieldsValue({...n,start_time:l(n.start_time),connector_1:{...n.charge_setting.connector_1,start_time:l(n.charge_setting.connector_1.start_time)},connector_2:{...n.charge_setting.connector_2,start_time:l(n.charge_setting.connector_2.start_time)}}),x(n.charge_setting.type),j(l(n.start_time)),_(n.duration))},[n,s]),i.useEffect(()=>{if(m){const a=m.add(g,"hour");s.setFieldsValue({end_time:a.format("YYYY-MM-DD HH:mm")})}},[m,g,s]);const y=a=>{x(a.target.value)};return e.jsx(S,{title:"Edit Charging Schedule",visible:b,onCancel:h,footer:[e.jsxs("div",{className:"footer-normal-btns",children:[e.jsx(p,{onClick:h,children:"Cancel"},"cancel"),e.jsx(p,{type:"primary",onClick:()=>{s.validateFields().then(a=>{v()})},children:"Confirm"},"confirm")]})],zIndex:1001,children:e.jsx("div",{className:"modal-form",children:e.jsxs(t,{form:s,layout:"vertical",children:[e.jsxs("div",{className:"two-column",children:[e.jsx(t.Item,{name:"chargepoint",label:"Charge Point",children:e.jsx(r,{disabled:!0})}),e.jsx(t.Item,{name:"recurrency",label:"Recurrency Settings",children:e.jsxs(c,{allowClear:!0,children:[e.jsx(c.Option,{value:"weekly",children:"Weekly"}),e.jsx(c.Option,{value:"daily",children:"Daily"})]})})]}),e.jsxs("div",{className:"two-column",children:[e.jsx(t.Item,{name:"start_time",label:"Start Time",rules:[{required:!0}],children:e.jsx(o,{showTime:!0,format:"YYYY-MM-DD HH:mm",onChange:a=>j(a)})}),e.jsx(t.Item,{name:"duration",label:"Duration",rules:[{required:!0}],children:e.jsx(d,{min:0,max:24,step:.5,defaultValue:24,onChange:a=>_(a)})})]}),e.jsx(t.Item,{label:"End Time",name:"end_time",children:e.jsx(r,{disabled:!0})}),e.jsxs(t.Item,{label:"Charge Setting",children:[e.jsxs(u.Group,{optionType:"button",onChange:y,value:C,children:[e.jsx(u.Button,{value:"current",children:"Current"}),e.jsx(u.Button,{value:"power",children:"Power"})]}),e.jsxs(f,{className:"mt-4",children:[e.jsx("div",{className:"mb-2 font-bold",children:"Connector 1"}),e.jsx("div",{className:"single-column mb-2",children:e.jsx(t.Item,{name:["connector_1","limit"],label:"Limit",children:e.jsx(r,{type:"number"})})}),e.jsxs("div",{className:"two-column",children:[e.jsx(t.Item,{name:["connector_1","start_time"],label:"Start Time",children:e.jsx(o,{showTime:!0,format:"YYYY-MM-DD HH:mm"})}),e.jsx(t.Item,{name:["connector_1","time_range"],label:"Time Range",children:e.jsx(d,{min:0,max:24,step:.5,defaultValue:24})})]})]}),e.jsxs(f,{className:"mt-4",children:[e.jsx("div",{className:"mb-2 font-bold",children:"Connector 2"}),e.jsx("div",{className:"single-column mb-2",children:e.jsx(t.Item,{name:["connector_2","limit"],label:"Limit",children:e.jsx(r,{type:"number"})})}),e.jsxs("div",{className:"two-column",children:[e.jsx(t.Item,{name:["connector_2","start_time"],label:"Start Time",children:e.jsx(o,{showTime:!0,format:"YYYY-MM-DD HH:mm"})}),e.jsx(t.Item,{name:["connector_2","time_range"],label:"Time Range",children:e.jsx(d,{min:0,max:24,step:.5,defaultValue:24})})]})]})]})]})})})}export{D as default};
