import{j as a}from"./index-DGkShce9.js";import{r as n}from"./vendor-react-BcJS7s_i.js";import A from"./addBrand-D2W-1DoM.js";import{H as l,E as I,k as c,w as i,K as u}from"./vendor-antd-DhxUoqir.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-Cw5pgUI-.js";const{Option:m}=i,p=[{value:"Tesla",models:["Model S","Model 3","Model X"]},{value:"Nissan",models:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"]},{value:"BYD",models:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]}];function T({visible:v,onCancel:h,record:r,onSave:b}){const[s]=l.useForm(),[B,x]=n.useState(!1),[j,y]=n.useState(p),[f,g]=n.useState(""),o=n.useRef(null),[t,C]=n.useState({brand:"",model:"",year:""});n.useEffect(()=>{r?s.setFieldsValue(r):s.resetFields()},[r,s]),n.useEffect(()=>{if(o.current){const e=o.current.getContext("2d");e&&(e.clearRect(0,0,100,100),e.font="12px Arial",e.fillText(t.brand,10,20),e.fillText(t.model,10,40),e.fillText(t.year,10,60))}},[t]);const E=e=>{g(e),s.setFieldsValue({brand_model:void 0})},F=()=>{const e=s.getFieldsValue();C({brand:e.brand||"",model:e.brand_model||"",year:e.year||""})},N=()=>{s.validateFields().then(e=>{b(e)})},V=(e,d)=>{y([...j,{value:e,models:d}]),s.setFieldsValue({brand:e,brand_model:d[0]})};return a.jsxs(I,{visible:v,title:r?"Edit Brand Model":"Add Brand Model",onCancel:h,zIndex:1001,footer:[a.jsxs("div",{className:"footer-normal-btns",children:[a.jsx(c,{onClick:h,children:"Cancel"},"cancel"),a.jsx(c,{type:"primary",onClick:N,children:"Confirm"},"confirm")]})],children:[a.jsx("div",{className:"modal-form",children:a.jsxs(l,{form:s,layout:"vertical",onValuesChange:F,children:[a.jsxs("div",{className:"two-column",children:[a.jsx(l.Item,{name:"brand",label:"Brand",rules:[{required:!0}],children:a.jsx(i,{onChange:e=>{E(e)},dropdownRender:e=>a.jsxs("div",{children:[e,a.jsx("div",{className:"p-2",children:a.jsx(c,{type:"link",onClick:()=>x(!0),children:"Add Brand"})})]}),children:j.map(e=>a.jsx(m,{value:e.value,children:e.value},e.value))})}),a.jsx(l.Item,{name:"brand_model",label:"Brand Model",rules:[{required:!0}],children:a.jsx(i,{disabled:!f,children:p.find(e=>e.value===f)?.models.map(e=>a.jsx(m,{value:e,children:e},e))})})]}),a.jsxs("div",{className:"two-column",children:[a.jsx(l.Item,{name:"year",label:"Year",rules:[{required:!0}],children:a.jsx(i,{children:Array.from({length:10},(e,d)=>new Date().getFullYear()-d).map(e=>a.jsx(m,{value:e,children:e},e))})}),a.jsx(l.Item,{name:"class",label:"Class",rules:[{required:!0}],children:a.jsx(u,{})})]}),a.jsxs("div",{className:"two-column",children:[a.jsx(l.Item,{name:"plug_type",label:"Plug Type",rules:[{required:!0}],children:a.jsx(u,{})}),a.jsx(l.Item,{name:"battery_capacity",label:"Battery Capacity (Ah)",rules:[{required:!0}],children:a.jsx(u,{type:"number"})})]}),a.jsx(l.Item,{name:"picture",label:"Picture",children:a.jsx("canvas",{ref:o,width:100,height:100})})]})}),a.jsx(A,{visible:B,onCancel:()=>x(!1),onSave:V})]})}export{T as default};
