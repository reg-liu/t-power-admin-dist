import{j as e,S as t}from"./index-ASplAzKr.js";import{r as m}from"./vendor-react-DcqtUZ_G.js";import{c as x}from"./cpMonitorService-Dwjwfbo9.js";import{E as g,i as l,k as d,Q as _,s as n}from"./vendor-antd-BiNc4BQP.js";import"./vendor-ui-BASYQBt4.js";import"./vendor-utils-DcB4TerO.js";function C({visible:i,onCancel:o,connector:a,onConfirm:h}){const[s,c]=m.useState(),p=async()=>{if(!s)return n.error("Please Enter Soc");const r=await x.start({cp_id_connector_pairs:[{charge_point_id:a.charge_point_id,connector_id:a.connector_id,mode:a?.charge_mode==="charge_mode"?"default":"v2g",soc:a?.charge_mode==="charge_mode"?{max:s/100}:{min:s/100}}]});r?.code===200&&(h(),n.success(r.message))};return m.useEffect(()=>{i||c("")},[i]),e.jsx(g,{title:a?.charge_mode==="charge_mode"?"Charge":"Discharge",open:i,onCancel:o,footer:[e.jsxs("div",{className:`footer-normal-btns start-footer ${a?.charge_mode}`,children:[e.jsx(l,{onClick:o,children:"Cancel"},"cancel"),e.jsx(l,{type:"primary",onClick:p,children:"Start"},"confirm")]},"start-footer")],children:e.jsx("div",{className:"modal-form one-column",children:e.jsxs("div",{className:"modal-form-item start-form",children:[e.jsx("label",{children:a?.charge_mode==="charge_mode"?e.jsxs("div",{className:"icon-label",children:[e.jsx("span",{children:"Max Soc(%)"}),e.jsx(d,{title:"Maximum Charge Limit Is 95%",placement:"top",children:e.jsx("span",{children:e.jsx(t,{className:"ml-1",icon:"Help",size:"20"})})})]}):e.jsxs("div",{className:"icon-label",children:[e.jsx("span",{children:"Min Soc(%)"}),e.jsx(d,{title:"Minimum Discharge Limit Is 20%",placement:"top",children:e.jsx("span",{children:e.jsx(t,{className:"ml-1",icon:"Help",size:"20"})})})]})}),e.jsx(_,{min:(a?.charge_mode==="charge_mode",20),max:a?.charge_mode==="charge_mode"?95:1e4,placeholder:"Enter",value:s,onChange:r=>c(r)})]})})})}export{C as default};
