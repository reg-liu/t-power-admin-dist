import{j as a,S as F}from"./index-CSntTeZq.js";import{r as s}from"./vendor-react-DcqtUZ_G.js";import{e as N}from"./ev-PecoakOh.js";import V from"./addBrand-oQ-1rc2v.js";import{H as l,E as T,i as o,w as i,K as c,I as M,U as Y}from"./vendor-antd-DC1bX4vL.js";import"./vendor-ui-BASYQBt4.js";import"./vendor-utils-DUuMHeSo.js";const{Option:u}=i,j=[{value:"Tesla",models:["Model S","Model 3","Model X"]},{value:"Nissan",models:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"]},{value:"BYD",models:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]}];function L({visible:v,onCancel:m,record:t,onSave:b}){const[r]=l.useForm(),[y,p]=s.useState(!1),[h,B]=s.useState(j),[x,g]=s.useState(""),f=s.useRef(null),[n,C]=s.useState({brand:"",model:"",year:""});s.useEffect(()=>{t?r.setFieldsValue(t):r.resetFields()},[t,r]),s.useEffect(()=>{if(f.current){const e=f.current.getContext("2d");e&&(e.clearRect(0,0,100,100),e.font="12px Arial",e.fillText(n.brand,10,20),e.fillText(n.model,10,40),e.fillText(n.year,10,60))}},[n]);const E=e=>{g(e),r.setFieldsValue({brand_model:void 0})},A=()=>{const e=r.getFieldsValue();C({brand:e.brand||"",model:e.brand_model||"",year:e.year||""})},I=()=>{r.validateFields().then(e=>{b(e)})},S=(e,d)=>{B([...h,{value:e,models:d}]),r.setFieldsValue({brand:e,brand_model:d[0]})};return a.jsxs(T,{open:v,title:t?"Edit Brand Model":"Add Brand Model",onCancel:m,zIndex:1001,footer:[a.jsxs("div",{className:"footer-normal-btns",children:[a.jsx(o,{onClick:m,children:"Cancel"},"cancel"),a.jsx(o,{type:"primary",onClick:I,children:t?"Confirm":"Create"},"confirm")]},"edit-brand-footer")],children:[a.jsx("div",{className:"modal-form",children:a.jsxs(l,{form:r,layout:"vertical",onValuesChange:A,children:[a.jsx(l.Item,{name:"brand",label:"Brand",rules:[{required:!0}],children:a.jsx(i,{onChange:e=>{E(e)},placeholder:"Select Brand",dropdownRender:e=>a.jsxs("div",{children:[e,a.jsx("div",{className:"p-2",children:a.jsx(o,{type:"link",onClick:()=>p(!0),children:"Add Brand"})})]}),children:h.map(e=>a.jsx(u,{value:e.value,children:e.value},e.value))})}),a.jsx(l.Item,{name:"brand_model",label:"Brand Model",rules:[{required:!0}],children:a.jsx(i,{placeholder:"Select Brand Model",disabled:!x,children:j.find(e=>e.value===x)?.models.map(e=>a.jsx(u,{value:e,children:e},e))})}),a.jsx(l.Item,{name:"year",label:"Year",rules:[{required:!0}],children:a.jsx(i,{placeholder:"Select Year",children:Array.from({length:10},(e,d)=>new Date().getFullYear()-d).map(e=>a.jsx(u,{value:e,children:e},e))})}),a.jsx(l.Item,{name:"class",label:"Class",rules:[{required:!0}],children:a.jsx(c,{placeholder:"Enter Class"})}),a.jsx(l.Item,{name:"plug_type",label:"Plug Type",rules:[{required:!0}],children:a.jsx(c,{placeholder:"Enter Plug Type"})}),a.jsx(l.Item,{name:"battery_capacity",label:"Battery Capacity (Ah)",rules:[{required:!0}],children:a.jsx(c,{type:"number",placeholder:"Enter Battery Capacity"})}),a.jsx(l.Item,{name:"photo",label:"Photo",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:a.jsxs("div",{className:"upload-wrapper",children:[t&&a.jsx(M,{src:N,preview:!1,width:236,className:"entity-image mr-4 object-cover"}),a.jsx(Y,{listType:"picture-card",children:a.jsxs("div",{className:"upload-inner",children:[a.jsx(F,{icon:"Add",size:"20",color:"#1CAE70"}),a.jsx("div",{style:{marginTop:4},children:"Upload Picture"})]})})]})})]})}),a.jsx(V,{visible:y,onCancel:()=>p(!1),onSave:S})]})}export{L as default};
