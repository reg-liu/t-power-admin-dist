import{g as Q,j as e,f as r,S as d}from"./index-BzX5j1_4.js";import{r as l}from"./vendor-react-BcJS7s_i.js";import{c as $}from"./chargepoint-wPlJlVYc.js";import q from"./detail-BACEv2Vl.js";import J from"./editConnector-CR35w4cq.js";import W from"./setChargeProfile-DtkG9uHd.js";import Z from"./start-RBG_wruG.js";import{F as g,k as t,I as ee,w as h,P as C,z as S,l as se,E as B,O as ae,D as A}from"./vendor-antd-DTUiWunz.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-Bfd8ZwWc.js";import"./LineChart--srMmApq.js";import"./isEqual-Hc_6Fhhx.js";import"./vendor-charts-Cv5x1InZ.js";import"./index-Dj133iwh.js";const{Option:a}=h,I={Tesla:["Model S","Model 3","Model X"],Nissan:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"],BYD:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]},N=[{key:"1",name:"ChargePoint 1",cp_sn:"CP001",brand:"Tesla",brand_model:"Model S",chargepoint_status:"Online",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"1-1",chargePointKey:"1",name:"Connector A",connector_id:"C001",status:"Available"},{key:"1-2",chargePointKey:"1",name:"Connector B",connector_id:"C002",status:"Charging"}]},{key:"2",name:"ChargePoint 2",cp_sn:"CP002",brand:"Nissan",brand_model:"Nissan LEAF",chargepoint_status:"Offline",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"2-1",chargePointKey:"2",name:"Connector A",connector_id:"C003",status:"Unavailable"},{key:"2-2",chargePointKey:"2",name:"Connector B",connector_id:"C004",status:"Reserved"}]},{key:"3",name:"ChargePoint 3",cp_sn:"CP003",brand:"BYD",brand_model:"BYD Tang EV",chargepoint_status:"Unknown",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"3-1",chargePointKey:"3",name:"Connector A",connector_id:"C005",status:"Faulted"},{key:"3-2",chargePointKey:"3",name:"Connector B",connector_id:"C006",status:"Unknown"}]},{key:"4",name:"ChargePoint 4",cp_sn:"CP004",brand:"Tesla",brand_model:"Model S",chargepoint_status:"Online",picture:"https://avatars.githubusercontent.com/u/64935023",connectors:[{key:"4-1",chargePointKey:"1",name:"Connector A",connector_id:"C007",status:"Available"},{key:"4-2",chargePointKey:"1",name:"Connector B",connector_id:"C008",status:"Charging"}]}];function ye(){const[i,m]=l.useState({}),[v,K]=l.useState("name"),[c,w]=l.useState([]),[u,f]=l.useState([]),[_,z]=l.useState("list"),[V,x]=l.useState(!1),[M,p]=l.useState(!1),[D,b]=l.useState(!1),[O,o]=l.useState(!1),[R,P]=l.useState(null),F=Q();l.useEffect(()=>{const s=N.filter(n=>c.includes(n.key)).flatMap(n=>n.connectors.map(y=>y.key));f(s)},[c]);const L=()=>{},j=s=>{},T=s=>{w(s)},U=s=>{f(s)},Y=[g.SELECTION_COLUMN,g.EXPAND_COLUMN,{title:"Name",dataIndex:"name",className:"bold",key:"name",render:(s,n)=>e.jsx(t,{type:"link",onClick:()=>{P(n),b(!0)},children:s})},{title:"SN",dataIndex:"cp_sn",key:"cp_sn"},{title:"Brand",dataIndex:"brand",key:"brand"},{title:"Brand Model",dataIndex:"brand_model",key:"brand_model"},{title:"ChargePoint Status",dataIndex:"chargepoint_status",key:"chargepoint_status",render:s=>e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:s.toLowerCase()}),e.jsx("span",{children:s})]})}],E=[{key:"1",label:e.jsx(t,{type:"link",icon:e.jsx(d,{icon:"Set",size:"20"}),onClick:()=>x(!0),children:"Set Charge Profile"})},{key:"2",label:e.jsx(t,{type:"link",icon:e.jsx(d,{icon:"Edit",size:"20"}),onClick:()=>p(!0),children:"Edit Connector Availability"})}],G=s=>{const n=[{title:"ID",className:"bold",width:"240px",dataIndex:"connector_id",key:"connector_id"},{title:"Status",width:"240px",dataIndex:"status",key:"status"},{title:"Operation",width:"340px",key:"operation",render:()=>e.jsxs("div",{className:"operations",children:[e.jsx(t,{type:"link",icon:e.jsx(d,{icon:"Start",size:"20"}),onClick:()=>o(!0),children:"Start"}),e.jsx(C,{title:"Are you sure to stop?",onConfirm:()=>j(),children:e.jsx(t,{type:"link",icon:e.jsx(d,{icon:"Stop",size:"20"}),children:"Stop"})}),e.jsx(A,{menu:{items:E},children:e.jsx("div",{children:e.jsx(t,{type:"link",icon:e.jsx(d,{icon:"Ellipsis",size:"20"})})})})]})}];return e.jsx(g,{columns:n,showHeader:!1,dataSource:s.connectors,pagination:!1,bordered:!0,rowSelection:{selectedRowKeys:u,onChange:U}})},H=e.jsxs(h,{value:v,onChange:K,style:{width:90},children:[e.jsx(a,{value:"name",children:"Name"}),e.jsx(a,{value:"sn",children:"SN"})]});return e.jsxs("div",{className:"main-content",children:[e.jsxs("div",{className:"search-area flex flex-wrap justify-between",children:[e.jsxs("div",{className:"search-item w-1/5",children:[e.jsx("label",{className:"block",children:"ChargePoint"}),e.jsx(ee,{addonBefore:H,placeholder:v==="name"?"Name":"SN",allowClear:!0,value:i[v],onChange:s=>m({...i,[v]:s.target.value})})]}),e.jsxs("div",{className:"search-item w-1/5",children:[e.jsx("label",{className:"block",children:"Brand"}),e.jsx(h,{className:"w-full",placeholder:"Brand",value:i.brand,onChange:s=>{m({...i,brand:s,brand_model:void 0})},children:Object.keys(I).map(s=>e.jsx(a,{value:s,children:s},s))})]}),e.jsxs("div",{className:"search-item w-1/5",children:[e.jsx("label",{className:"block",children:"Brand Model"}),e.jsx(h,{className:"w-full",placeholder:"Brand Model",value:i.brand_model,disabled:!i.brand,onChange:s=>m({...i,brand_model:s}),children:i.brand&&I[i.brand].map(s=>e.jsx(a,{value:s,children:s},s))})]}),e.jsxs("div",{className:"search-item w-1/5",children:[e.jsx("label",{className:"block",children:"ChargePoint Status"}),e.jsxs(h,{className:"w-full",placeholder:"ChargePoint Status",onChange:s=>m({...i,chargepoint_status:s}),children:[e.jsx(a,{value:"online",children:"Online"}),e.jsx(a,{value:"offline",children:"Offline"}),e.jsx(a,{value:"unknown",children:"Unknown"})]})]}),e.jsxs("div",{className:"search-item w-1/5",children:[e.jsx("label",{className:"block",children:"Connector Status"}),e.jsxs(h,{className:"w-full",placeholder:"Connector Status",onChange:s=>m({...i,connector_status:s}),children:[e.jsx(a,{value:"available",children:"Available"}),e.jsx(a,{value:"unavailable",children:"Unavailable"}),e.jsx(a,{value:"preparing",children:"Preparing"}),e.jsx(a,{value:"starting",children:"Starting"}),e.jsx(a,{value:"stopping",children:"Stopping"}),e.jsx(a,{value:"charging",children:"Charging"}),e.jsx(a,{value:"suspended_ev",children:"Suspended EV"}),e.jsx(a,{value:"suspended_evse",children:"Suspended EVSE"}),e.jsx(a,{value:"finishing",children:"Finishing"}),e.jsx(a,{value:"reserved",children:"Reserved"}),e.jsx(a,{value:"faulted",children:"Faulted"}),e.jsx(a,{value:"unknown",children:"Unknown"})]})]}),e.jsx("div",{className:"search-btn ml-auto flex w-1/5 items-end justify-end",children:e.jsx(t,{type:"primary",onClick:L,className:"mt-4",children:"Search"})})]}),e.jsxs("div",{className:"operation-area flex items-center justify-between",children:[e.jsx("div",{children:u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"mr-2",icon:e.jsx(r,{icon:"f7:play-circle",size:16}),onClick:()=>o(!0),children:"Start"}),e.jsx(C,{title:"Are you sure to stop?",onConfirm:()=>j(),children:e.jsx(t,{className:"mr-2",icon:e.jsx(r,{icon:"lucide:circle-pause",size:16}),children:"Stop"})}),e.jsx(t,{className:"mr-2",icon:e.jsx(r,{icon:"hugeicons:settings-02",size:16}),onClick:()=>x(!0),children:"Set Charge Profile"}),e.jsx(t,{className:"mr-2",icon:e.jsx(r,{icon:"mynaui:edit-one",size:16}),onClick:()=>p(!0),children:"Edit Connector Availability"}),e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Are you sure to remotely reset hardware?",onConfirm:()=>j(),children:e.jsx(t,{className:"mr-2",icon:e.jsx(r,{icon:"mynaui:edit-one",size:16}),children:"Remotely Reset Hardware"})}),e.jsx(C,{title:"Are you sure to remotely reset software?",onConfirm:()=>j(),children:e.jsx(t,{className:"mr-2",icon:e.jsx(r,{icon:"mynaui:edit-one",size:16}),children:"Remotely Reset Software"})})]})]})}),e.jsxs(S.Group,{className:"layout-switch",value:_,onChange:s=>z(s.target.value),children:[e.jsx(S.Button,{value:"list",children:e.jsxs("div",{className:"layout-switch-item",children:[e.jsx(r,{icon:"mynaui:list",size:20}),"List"]})}),e.jsx(S.Button,{value:"grid",children:e.jsxs("div",{className:"layout-switch-item",children:[e.jsx(r,{icon:"proicons:grid",size:20}),"Grid"]})})]})]}),_==="list"?e.jsx(g,{columns:Y,dataSource:N,bordered:!0,expandable:{expandedRowRender:G,defaultExpandedRowKeys:N.map(s=>s.key)},rowSelection:{selectedRowKeys:c,onChange:T}}):e.jsx("div",{className:"grid",children:N.map(s=>e.jsx("div",{className:"grid-item",children:e.jsxs(se,{children:[e.jsxs("div",{className:"grid-top with-image flex items-center",children:[e.jsx(B,{checked:c.includes(s.key),onChange:n=>{const y=n.target.checked?[...c,s.key]:c.filter(k=>k!==s.key);w(y)}}),e.jsx(ae,{src:$,preview:!1,height:184,className:"entity-image object-cover"})]}),e.jsxs("div",{className:"grid-bottom",children:[e.jsx("div",{className:"display-item",children:e.jsx(t,{type:"link",className:"detail-link",onClick:()=>{P(s),b(!0)},children:s.name})}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"Status:"})," ",e.jsx("span",{className:"value",children:e.jsxs("div",{className:"status-item",children:[e.jsx("div",{className:s.chargepoint_status.toLowerCase()}),e.jsx("span",{children:s.chargepoint_status})]})})]}),e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:"SN:"})," ",e.jsx("span",{className:"value",children:s.cp_sn})]}),e.jsx("div",{className:"display-item  flex-col !items-start gap-2 !px-0",children:s.connectors.map(n=>e.jsxs("div",{className:"connector-wrapper w-full",children:[e.jsxs("div",{className:"connectors",children:[e.jsx(B,{checked:u.includes(n.key),onChange:y=>{const k=y.target.checked?[...u,n.key]:u.filter(X=>X!==n.key);f(k)}}),e.jsx("div",{className:"items flex-auto",children:e.jsxs("div",{className:"display-item",children:[e.jsx("span",{className:"label",children:n.connector_id})," ",e.jsx("span",{className:`value status ${n.status.toLowerCase()}`,children:n.status})]})})]}),e.jsx("div",{className:"operation-columns",children:e.jsxs("div",{className:"operation-row",children:[e.jsx(t,{type:"link",className:" operation-row-item",icon:e.jsx(r,{icon:"f7:play-circle",size:16}),onClick:()=>o(!0),children:"Start"}),e.jsx("div",{className:"split"}),e.jsx(C,{title:"Are you sure to stop?",onConfirm:()=>j(),children:e.jsx(t,{className:"operation-row-item",type:"link",icon:e.jsx(r,{icon:"lucide:circle-pause",size:16}),children:"Stop"})}),e.jsx("div",{className:"split"}),e.jsx(A,{menu:{items:E},children:e.jsx("div",{className:"operation-row-item",children:e.jsx(t,{type:"link",icon:e.jsx(d,{icon:"Ellipsis",size:"20"})})})})]})})]},n.key))})]})]},s.key)}))}),e.jsx(W,{visible:V,onCancel:()=>x(!1),onConfirm:()=>{x(!1)}}),e.jsx(J,{visible:M,onCancel:()=>p(!1),onConfirm:s=>{p(!1)}}),e.jsx(q,{visible:D,onCancel:()=>b(!1),chargePoint:R,onStart:()=>o(!0),onSetChargeProfile:()=>x(!0),onEditConnector:()=>p(!0),isAdmin:F}),e.jsx(Z,{visible:O,onCancel:()=>o(!1),onConfirm:()=>{o(!1)}})]})}export{ye as default};
