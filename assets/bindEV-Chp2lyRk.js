import{h as N,j as r,S as B}from"./index-C04FQz7F.js";import{r as t}from"./vendor-react-DcqtUZ_G.js";import{H as l,E as g,i as c,w as a,U as E,K as u}from"./vendor-antd-DNjhvzFa.js";import"./vendor-ui-BASYQBt4.js";import"./vendor-utils-DuhXCHR2.js";const{Option:m}=a;function F({visible:h,onClose:i}){const[n]=l.useForm(),x=N(),d=t.useRef(null),[p,j]=t.useState(""),[s,b]=t.useState({brand:"",model:"",year:""}),o=[{value:"Tesla",models:["Model S","Model 3","Model X"]},{value:"Nissan",models:["Nissan LEAF","Nissan Ariya","Nissan e-NV200"]},{value:"BYD",models:["BYD Tang EV","BYD Qin EV","BYD Yuan EV"]}];t.useEffect(()=>{if(d.current){const e=d.current.getContext("2d");e&&(e.clearRect(0,0,100,100),e.font="12px Arial",e.fillText(s.brand,10,20),e.fillText(s.model,10,40),e.fillText(s.year,10,60))}},[s]);const v=()=>{const e=n.getFieldsValue();b({brand:e.brand||"",model:e.brand_model||"",year:e.year||""})},f=e=>{j(e),n.setFieldsValue({brand_model:void 0})};return r.jsx(g,{title:"Bind a new EV",open:h,onCancel:i,width:474,footer:[r.jsxs("div",{className:"footer-normal-btns",children:[r.jsx(c,{onClick:i,children:"Cancel"},"cancel"),r.jsx(c,{type:"primary",onClick:()=>{n.validateFields().then(e=>{i()})},children:"Bind"},"confirm")]},"bind-ev-footer")],children:r.jsx("div",{className:"modal-form",children:r.jsxs(l,{form:n,layout:"vertical",onValuesChange:v,children:[r.jsx(l.Item,{name:"brand",label:"Brand",rules:[{required:!0}],children:r.jsx(a,{placeholder:"Select Brand",onChange:f,children:o.map(e=>r.jsx(m,{value:e.value,children:e.value},e.value))})}),r.jsx(l.Item,{name:"brand_model",label:"Brand Model",rules:[{required:!0}],children:r.jsx(a,{disabled:!n.getFieldValue("brand"),placeholder:"Select Brand Model",children:o.find(e=>e.value===p)?.models.map(e=>r.jsx(m,{value:e,children:e},e))})}),r.jsx(l.Item,{name:"year",label:"Year",rules:[{required:!0}],children:r.jsx(a,{placeholder:"Select Year",children:[2020,2021,2022,2023].map(e=>r.jsx(a.Option,{value:e,children:e},e))})}),r.jsx(l.Item,{name:"photo",label:"Photo",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:r.jsx("div",{className:"upload-wrapper",children:r.jsx(E,{listType:"picture-card",children:r.jsxs("div",{className:"upload-inner",children:[r.jsx(B,{icon:"Add",size:"20",color:"#1CAE70"}),r.jsx("div",{style:{marginTop:4},children:"Upload Picture"})]})})})}),r.jsx(l.Item,{name:"registration_number",label:"Registration Number",rules:[{required:!0}],children:r.jsx(u,{placeholder:"Enter Registration Number"})}),r.jsx(l.Item,{name:"vin",label:"VIN Number",rules:[{required:!0}],children:r.jsx(u,{placeholder:"Enter VIN Number"})}),x&&r.jsx(l.Item,{name:"user",label:"User",rules:[{required:!0}],children:r.jsxs(a,{placeholder:"Select User",children:[r.jsx(a.Option,{value:"john",children:"John Doe"}),r.jsx(a.Option,{value:"jane",children:"Jane Smith"}),r.jsx(a.Option,{value:"bob",children:"Bob Johnson"})]})})]})})})}export{F as default};
