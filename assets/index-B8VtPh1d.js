import{j as e}from"./index-qU7ZAw9A.js";import{c as z}from"./index.modern-BgdPXcnK.js";import{r as o}from"./vendor-react-BcJS7s_i.js";import{H as K,k as w,w as v,S as _}from"./vendor-antd-DZ11D4bT.js";const N="AIzaSyCQc86pm5M44jtKOZydqmr329R3aQszvaw";function P(){const[m,a]=o.useState(!1);return o.useEffect(()=>{if(document.querySelector('script[src^="https://maps.googleapis.com/maps/api/js"]'))a(!0);else{const c=document.createElement("script");c.src=`https://maps.googleapis.com/maps/api/js?key=${N}&libraries=places`,c.async=!0,c.onload=()=>a(!0),document.body.appendChild(c)}},[]),m}const{Option:Q}=v;function I({visible:m,onClose:a,onSelect:c}){const[L,y]=o.useState(""),[C,S]=o.useState([]),[l,O]=o.useState(null),[A,M]=o.useState({lat:-37.975,lng:145.238}),[k,x]=o.useState(!1),u=o.useRef(null),f=o.useRef(null),h=P();o.useEffect(()=>{h&&window.google&&(u.current=new window.google.maps.places.AutocompleteService,f.current=new window.google.maps.Geocoder)},[h]);const R=s=>{y(s),s.length>2&&u.current?(x(!0),u.current.getPlacePredictions({input:s},(t,r)=>{r===window.google.maps.places.PlacesServiceStatus.OK&&S(t),x(!1)})):S([])},b=s=>{f.current&&f.current.geocode({placeId:s},(t,r)=>{if(r==="OK"&&t[0]){const{lat:i,lng:d}=t[0].geometry.location,p=t[0].formatted_address||E(t[0]),g={address:p,lat:i(),lng:d()};M({lat:i(),lng:d()}),O(g),y(p)}})},E=s=>{const t=s.address_components,r=t.find(n=>n.types.includes("country"))?.short_name||"",i=t.find(n=>n.types.includes("administrative_area_level_1"))?.short_name||"",d=t.find(n=>n.types.includes("administrative_area_level_2"))?.short_name||"",p=t.find(n=>n.types.includes("locality"))?.short_name||"",g=t.find(n=>n.types.includes("postal_code"))?.long_name||"";return`${r}, ${i}, ${d}, ${p}, ${g}`},j=()=>{l&&c(l),a()};return e.jsxs(K,{title:"Location Picker",visible:m,onOk:j,onCancel:a,width:800,bodyStyle:{height:"600px",display:"flex",flexDirection:"column"},footer:[e.jsxs("div",{className:"footer-normal-btns",children:[e.jsx(w,{onClick:a,children:"Cancel"},"cancel"),e.jsx(w,{type:"primary",onClick:j,children:"Confirm"},"confirm")]})],children:[e.jsx("div",{children:e.jsx(v,{showSearch:!0,value:L,placeholder:"Search for a location",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:R,onChange:b,notFoundContent:k?e.jsx(_,{size:"small"}):null,style:{width:"100%"},children:C.map(s=>e.jsx(Q,{value:s.place_id,children:s.description},s.place_id))})}),e.jsx("div",{className:"relative mt-3 flex-grow",children:h?e.jsx(z,{bootstrapURLKeys:{key:"AIzaSyCQc86pm5M44jtKOZydqmr329R3aQszvaw"},center:A,zoom:16,style:{height:"100%",width:"100%"}}):e.jsx(_,{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 transform"})}),l&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Selected Location:"}),e.jsx("p",{children:l.address}),e.jsxs("p",{children:["Latitude: ",l.lat.toFixed(6)]}),e.jsxs("p",{children:["Longitude: ",l.lng.toFixed(6)]})]})]})}export{I as M};
