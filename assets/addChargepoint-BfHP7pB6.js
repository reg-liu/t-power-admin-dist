import{j as e}from"./index-BDpTnmje.js";import{r as n}from"./vendor-react-DcqtUZ_G.js";import{c as g}from"./cpUserManagementService-DCBCIWAq.js";import{M as C}from"./index-CdILfofD.js";import{H as o,E as M,i as l,K as k,w as m,s as y}from"./vendor-antd-DC1bX4vL.js";import"./vendor-ui-BASYQBt4.js";import"./vendor-utils-DUuMHeSo.js";import"./index.modern-DDXp5BPH.js";import"./vendor-charts-CCrp_OZH.js";import"./index-DcX75npX.js";const{Option:F}=m;function A({visible:r,onCancel:c,onConfirm:u,users:h}){const[a]=o.useForm(),[f,i]=n.useState(!1),[t,d]=n.useState(),x=()=>{i(!0)},j=()=>{i(!1)},_=s=>{d(s),a.setFieldsValue({location:s})},S=()=>{a.validateFields().then(async s=>{const b={sn:s.sn,user_id:s.user,cp_address:t?.cp_address,latlng:t?.latlng,cp_suburb:t?.cp_suburb,cp_state:t?.cp_state,cp_postcode:t?.cp_postcode,cp_country:t?.cp_country},p=await g.add(b);p?.code===200&&(y.success(p.message),u(),c())}).catch(s=>{})};return n.useEffect(()=>{r||(d(null),a.setFieldsValue({sn:""}),a.setFieldsValue({user:""}))},[r]),e.jsx(M,{title:"Bind User and Charge Point",open:r,okText:"Confirm",cancelText:"Cancel",onCancel:c,footer:[e.jsxs("div",{className:"footer-normal-btns",children:[e.jsx(l,{onClick:c,children:"Cancel"},"cancel"),e.jsx(l,{type:"primary",onClick:S,children:"Add"},"confirm")]},"add-cp-footer")],children:e.jsx("div",{className:"modal-form",children:e.jsxs(o,{form:a,layout:"vertical",children:[e.jsx(o.Item,{name:"sn",label:"SN",rules:[{required:!0,message:"SN"}],children:e.jsx(k,{placeholder:"Input SN"})}),e.jsx(o.Item,{name:"user",label:"User",rules:[{required:!0,message:"User"}],children:e.jsx(m,{placeholder:"User",children:h.map(s=>e.jsx(F,{value:s.user_id,children:s.name},s.user_id))})}),e.jsxs(o.Item,{name:"location",label:"location",rules:[{required:!0,message:"Location"}],children:[e.jsx(l,{onClick:x,children:e.jsx("span",{className:"location-picker",children:t?t.cp_address:"Open Location Picker"})}),e.jsx(C,{visible:f,onClose:j,onSelect:_})]})]})})})}export{A as default};
