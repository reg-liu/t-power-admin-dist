import{j as e}from"./index-BHG4noE_.js";import{N as r,a4 as s,J as p,k as u,I as a,V as m,w as n}from"./vendor-antd-Cm1Y6B8R.js";import{r as f}from"./vendor-react-BcJS7s_i.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-C6QnRqht.js";function v({visible:h,onCancel:l,onConfirm:j,schedule:t}){const[i]=r.useForm();f.useEffect(()=>{t&&i.setFieldsValue({chargepoint:t.chargepoint,start_time:s(t.time_range[0],"HH:mm"),end_time:s(t.time_range[1],"HH:mm"),recurrency:t.recurrency,charge_setting:{power:t.charge_setting.power,time:s(t.charge_setting.time,"HH:mm")}})},[t,i]);const x=o=>{j(o)},g=(o,c)=>{const d=i.getFieldValue("start_time");return d&&c&&c.isBefore(d)?Promise.reject(new Error("End Time must be after Start Time")):Promise.resolve()};return e.jsx(p,{title:"Edit Charging Schedule",visible:h,onCancel:l,footer:[e.jsxs("div",{className:"footer-normal-btns",children:[e.jsx(u,{onClick:l,children:"Cancel"},"cancel"),e.jsx(u,{type:"primary",onClick:i.submit,children:"Confirm"},"confirm")]})],children:e.jsx("div",{className:"modal-form",children:e.jsxs(r,{form:i,onFinish:x,layout:"vertical",children:[e.jsxs("div",{className:"two-column",children:[e.jsx(r.Item,{name:"chargepoint",label:"Charge Point",children:e.jsx(a,{disabled:!0})}),e.jsx(r.Item,{name:"start_time",label:"Start Time",rules:[{required:!0}],children:e.jsx(m,{format:"HH:mm"})})]}),e.jsxs("div",{className:"two-column",children:[e.jsx(r.Item,{name:"end_time",label:"End Time",rules:[{required:!0},{validator:g}],children:e.jsx(m,{format:"HH:mm"})}),e.jsx(r.Item,{name:"recurrency",label:"Recurrency Settings",rules:[{required:!0}],children:e.jsxs(n,{children:[e.jsx(n.Option,{value:"daily",children:"Daily"}),e.jsx(n.Option,{value:"weekly",children:"Weekly"}),e.jsx(n.Option,{value:"monthly",children:"Monthly"})]})})]}),e.jsx(r.Item,{label:"Charge Setting",children:e.jsxs(a.Group,{compact:!0,children:[e.jsx(r.Item,{name:["charge_setting","time"],noStyle:!0,rules:[{required:!0}],children:e.jsx(m,{format:"HH:mm",style:{width:"50%"}})}),e.jsx(r.Item,{name:["charge_setting","power"],noStyle:!0,rules:[{required:!0}],children:e.jsx(a,{style:{width:"50%"},placeholder:"Power"})})]})})]})})})}export{v as default};
