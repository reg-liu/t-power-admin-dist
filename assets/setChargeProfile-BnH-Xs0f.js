import{j as t,S as g}from"./index-BGJumyCV.js";import{r as a}from"./vendor-react-BcJS7s_i.js";import{N as h,Q as p,J as y,k as o,q as P,z as m,l as b}from"./vendor-antd-C5sFxZgj.js";import"./vendor-ui-DPkccqlC.js";import"./vendor-utils-C8CVoVQY.js";function E({visible:i,onCancel:u,connector:j,onConfirm:x}){const s=a.useRef({0:{limit:"",startAfter:""}}),[d,w]=a.useState(!1),[l,f]=a.useState(1),[n,v]=a.useState("current");a.useEffect(()=>{i||(s.current={0:{limit:"",startAfter:""}},f(1))},[i]);const A=()=>{s.current[l]={limit:"",startAfter:""},f(l+1)},C=(e,r)=>{s.current[e]={...s.current[e]||{limit:"",startAfter:""},limit:r}},S=(e,r)=>{s.current[e]={...s.current[e]||{limit:"",startAfter:""},startAfter:r}},N=new Array(l).fill(null).map((e,r)=>t.jsxs("div",{className:"two-column label-value-split advance-start-row",children:[t.jsx(h.Item,{name:"limit",label:"Limit",rules:[{required:!0,message:n==="current"?"Current limit":"Power limit"}],children:t.jsx(p,{min:1,max:1e5,defaultValue:s.current[r].limit,placeholder:n==="current"?"Current limit":"Power limit",onChange:c=>C(r,c)})}),t.jsx(h.Item,{name:"startAfter",label:"Start After(Minutes)",rules:[{required:!0,message:"Start After"}],children:t.jsx(p,{min:1,max:1e5,placeholder:"Start After",defaultValue:s.current[r].startAfter,onChange:c=>S(r,c)})})]},r));return t.jsx(y,{title:"Set Charge Profile",visible:i,onCancel:u,footer:[t.jsxs("div",{className:"footer-normal-btns",children:[t.jsx(o,{onClick:u,children:"Cancel"},"cancel"),t.jsx(o,{type:"primary",onClick:x,children:"Start"},"confirm")]})],width:500,children:t.jsxs("div",{className:"modal-form one-column",children:[t.jsxs("div",{className:"between-wrapper",children:[t.jsx("div",{className:"title",children:j?.name}),t.jsxs("div",{className:"switch",children:["With Charge Profile",t.jsx(P,{checked:d,onChange:e=>w(e)})]})]}),t.jsxs("div",{className:d?"mt-4":"pointer-events-none mt-4 opacity-50",children:[t.jsxs("div",{className:"between-wrapper",children:[t.jsxs(m.Group,{optionType:"button",value:n,onChange:e=>v(e.target.value),className:"my-4",children:[t.jsx(m.Button,{value:"current",children:"Current"}),t.jsx(m.Button,{value:"power",children:"Power"})]}),t.jsx(o,{type:"link",icon:t.jsx(g,{icon:"Add",size:"28"}),onClick:()=>A()})]}),t.jsx(b,{children:N})]})]})})}export{E as default};
