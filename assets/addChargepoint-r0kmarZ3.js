import{j as e}from"./index-4YVUTv9m.js";import{r as n}from"./vendor-react-DcqtUZ_G.js";import{c as M}from"./cpUserManagementService-D7qLYYSm.js";import{M as k}from"./index-D0wRvBKT.js";import{H as o,E as y,i as l,w as i,s as F}from"./vendor-antd-BiNc4BQP.js";import"./vendor-ui-BASYQBt4.js";import"./vendor-utils-DcB4TerO.js";import"./index.modern-DDXp5BPH.js";import"./vendor-charts-CCrp_OZH.js";import"./index-DcX75npX.js";const{Option:u}=i;function A({visible:r,onCancel:c,onConfirm:h,users:x,sns:f}){const[a]=o.useForm(),[j,d]=n.useState(!1),[t,p]=n.useState(),_=()=>{d(!0)},S=()=>{d(!1)},b=s=>{p(s),a.setFieldsValue({location:s})},g=()=>{a.validateFields().then(async s=>{const C={sn:s.sn,user_id:s.user,cp_address:t?.cp_address,latlng:t?.latlng,cp_suburb:t?.cp_suburb||",",cp_state:t?.cp_state,cp_postcode:t?.cp_postcode,cp_country:t?.cp_country},m=await M.add(C);m?.code===200&&(F.success(m.message),h(),c())}).catch(s=>{})};return n.useEffect(()=>{r||(p(null),a.setFieldsValue({sn:""}),a.setFieldsValue({user:""}))},[r]),e.jsx(y,{title:"Bind User and Charge Point",open:r,okText:"Confirm",cancelText:"Cancel",onCancel:c,footer:[e.jsxs("div",{className:"footer-normal-btns",children:[e.jsx(l,{onClick:c,children:"Cancel"},"cancel"),e.jsx(l,{type:"primary",onClick:g,children:"Add"},"confirm")]},"add-cp-footer")],children:e.jsx("div",{className:"modal-form",children:e.jsxs(o,{form:a,layout:"vertical",children:[e.jsx(o.Item,{name:"sn",label:"SN",rules:[{required:!0,message:"SN"}],children:e.jsx(i,{placeholder:"Select SN",children:f.map(s=>e.jsx(u,{value:s.sn,children:s.sn},s.sn))})}),e.jsx(o.Item,{name:"user",label:"User",rules:[{required:!0,message:"User"}],children:e.jsx(i,{placeholder:"User",children:x.map(s=>e.jsx(u,{value:s.user_id,children:s.name},s.user_id))})}),e.jsxs(o.Item,{name:"location",label:"location",rules:[{required:!0,message:"Location"}],children:[e.jsx(l,{onClick:_,children:e.jsx("span",{className:"location-picker",children:t?t.cp_address:"Open Location Picker"})}),e.jsx(k,{visible:j,onClose:S,onSelect:b})]})]})})})}export{A as default};
